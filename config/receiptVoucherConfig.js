// config/receiptVoucherConfig.js
module.exports = {
  // ========== เพิ่มการตั้งค่าระบบสร้างอัตโนมัติ ==========
  // เปิด/ปิดระบบสร้างอัตโนมัติ
  AUTO_CREATION_ENABLED: true,

  // ระยะเวลาในการตรวจสอบ (มิลลิวินาที) - ทุก 5 นาที (เพิ่มเป็น 5 นาที เพื่อลดการสร้างซ้ำ)
  AUTO_CREATE_INTERVAL: 5 * 60 * 1000,

  // จำนวนรายการสูงสุดที่จะประมวลผลในแต่ละรอบ
  AUTO_CREATE_BATCH_LIMIT: 50,

  // หน่วงเวลาระหว่างการสร้างแต่ละรายการ (มิลลิวินาที)
  AUTO_CREATE_DELAY: 500,

  // ========== การตั้งค่าเดิม ==========
  // ประเภทรายการที่ต้องสร้างใบสำคัญรับเงินอัตโนมัติ (รองรับทั้ง OUT และ IN)
  AUTO_CREATE_REASONS: [
    // OUT transactions
    'ขาย POS',      // ขายสินค้าเงินสด
    'ขายสด',        // ขายสินค้าเงินสด (อีกชื่อหนึ่ง)
    'ขายเชื่อ',     // ขายสินค้าแบบเชื่อ
    'ขายแบบผ่อน',   // ขายผ่อน
    'บริการ',       // บริการ

    // IN transactions
    'รับชำระหนี้',   // รับชำระหนี้จากลูกค้า
    'รับเงินมัดจำ',  // รับเงินมัดจำ
    'คืนสินค้า'      // รับคืนสินค้า
  ],

  // การแมปประเภทรายการกับประเภทใบสำคัญรับเงิน
  SALE_TYPE_MAPPING: {
    // OUT transactions
    'ขาย POS': 'cash_sale',
    'ขายสด': 'cash_sale',
    'ขายเชื่อ': 'credit_sale',
    'ขายแบบผ่อน': 'installment',
    'บริการ': 'service',

    // IN transactions
    'รับชำระหนี้': 'debt_payment',
    'รับเงินมัดจำ': 'deposit',
    'คืนสินค้า': 'return'
  },

  // การแมปวิธีการชำระเงินกับบัญชีเดบิต
  DEBIT_ACCOUNT_MAPPING: {
    'cash': '11101',          // เงินสด
    'transfer': '11103',      // เงินฝากธนาคาร
    'cheque': '11103',        // เงินฝากธนาคาร
    'credit_card': '11103',   // เงินฝากธนาคาร
    'e_wallet': '11103',      // เงินฝากธนาคาร
    'installment': '11301',   // ลูกหนี้การค้า
    'credit': '11301'         // ลูกหนี้การค้า (สำหรับขายเชื่อ)
  },

  // การแมปประเภทรายการกับบัญชีเครดิต
  CREDIT_ACCOUNT_MAPPING: {
    // OUT transactions - รายได้
    'ขาย POS': '44101',      // รายได้จากการขาย
    'ขายสด': '44101',        // รายได้จากการขาย
    'ขายเชื่อ': '44101',     // รายได้จากการขาย
    'ขายแบบผ่อน': '44101',   // รายได้จากการขาย
    'บริการ': '44102',       // รายได้จากการให้บริการ

    // IN transactions - หนี้สิน/ลดรายได้
    'รับชำระหนี้': '11301',   // ลูกหนี้การค้า (Cr. เมื่อรับชำระหนี้)
    'รับเงินมัดจำ': '21104',  // เงินมัดจำรับ
    'คืนสินค้า': '44103'      // รับคืนสินค้า (Dr.)
  },

  // การแมปบัญชีเดบิตพิเศษสำหรับ IN transactions
  SPECIAL_DEBIT_MAPPING: {
    'รับชำระหนี้': {
      'cash': '11101',        // Dr.เงินสด Cr.ลูกหนี้
      'transfer': '11103'     // Dr.ธนาคาร Cr.ลูกหนี้
    },
    'รับเงินมัดจำ': {
      'cash': '11101',        // Dr.เงินสด Cr.เงินมัดจำ
      'transfer': '11103'     // Dr.ธนาคาร Cr.เงินมัดจำ
    },
    'คืนสินค้า': {
      'all': '44103'          // Dr.รับคืนสินค้า Cr.เงินสด/ธนาคาร
    }
  },

  // การแมปบัญชีเครดิตพิเศษสำหรับ IN transactions
  SPECIAL_CREDIT_MAPPING: {
    'คืนสินค้า': {
      'cash': '11101',        // Cr.เงินสด (คืนเงินให้ลูกค้า)
      'transfer': '11103'     // Cr.ธนาคาร (คืนเงินให้ลูกค้า)
    }
  },

  // บัญชีภาษีขาย
  VAT_ACCOUNT: '21601',       // ภาษีขาย

  // การตั้งค่าการสร้างแบบกลุ่ม
  BATCH_CONFIG: {
    DEFAULT_LIMIT: 100,       // จำนวนรายการที่สร้างต่อครั้ง
    DELAY_BETWEEN_ITEMS: 500, // หน่วงเวลาระหว่างรายการ (ms)
    MAX_RETRY_ATTEMPTS: 3,    // จำนวนครั้งที่ลองใหม่หากเกิดข้อผิดพลาด

    // กำหนดว่าประเภทไหนสามารถสร้างแบบ batch ได้
    ALLOWED_BATCH_TYPES: [
      'ขาย POS', 'ขายสด', 'ขายเชื่อ',
      'รับชำระหนี้', 'รับเงินมัดจำ', 'คืนสินค้า'
    ]
  },

  // การตั้งค่าการแจ้งเตือน
  NOTIFICATION_CONFIG: {
    SHOW_SUCCESS_TOAST: true,
    AUTO_HIDE_TOAST: 5000,    // ซ่อนอัตโนมัติใน 5 วินาที
    SHOW_PROGRESS_BAR: true,

    // แจ้งเตือนตามประเภท
    NOTIFY_BY_TYPE: {
      'cash_sale': 'สร้างใบสำคัญรับเงินจากการขายสินค้า',
      'credit_sale': 'สร้างใบสำคัญรับเงินจากการขายเชื่อ',
      'debt_payment': 'สร้างใบสำคัญรับเงินจากการรับชำระหนี้',
      'deposit': 'สร้างใบสำคัญรับเงินจากการรับเงินมัดจำ',
      'return': 'สร้างใบสำคัญรับเงินจากการรับคืนสินค้า'
    }
  },

  // การตั้งค่าการตรวจสอบข้อมูล
  VALIDATION_CONFIG: {
    // ตรวจสอบว่าต้องมี fields อะไรบ้างสำหรับแต่ละประเภท
    REQUIRED_FIELDS: {
      'รับชำระหนี้': ['debtInvoices', 'customerInfo'],
      'รับเงินมัดจำ': ['customerInfo', 'depositAmount'],
      'คืนสินค้า': ['originalInvoice', 'returnItems']
    },

    // ตรวจสอบยอดเงินขั้นต่ำ
    MIN_AMOUNT: {
      'รับชำระหนี้': 1,
      'รับเงินมัดจำ': 100,
      'คืนสินค้า': 1
    }
  },

  // การตั้งค่าการสร้างเลขที่เอกสาร
  DOCUMENT_NUMBER_CONFIG: {
    // Prefix ตามประเภท
    PREFIX_BY_TYPE: {
      'cash_sale': 'RV',      // Receipt Voucher
      'credit_sale': 'RC',    // Receipt Credit
      'debt_payment': 'RP',   // Receipt Payment
      'deposit': 'RD',        // Receipt Deposit
      'return': 'RR',         // Receipt Return
      'service': 'RS',        // Receipt Service
      'installment': 'RI'     // Receipt Installment
    },

    // รูปแบบเลขที่เอกสาร: PREFIX + YYMM + RUNNING(4)
    FORMAT: '{PREFIX}{YY}{MM}{RUNNING}',
    RUNNING_DIGITS: 4
  }
};
