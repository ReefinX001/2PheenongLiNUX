<!DOCTYPE html>
<html lang="th">
<head>
  <!-- 1. Meta tags -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£" />
  <title>‡∏£‡∏∞‡∏ö‡∏ö HR - Dashboard</title>

  <!-- 2. Preconnect -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin/>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin/>

  <!-- 3. Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë•</text></svg>" type="image/svg+xml" />

  <!-- 4. Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- 5. Tailwind Config + DaisyUI Plugin -->
  <script>
    tailwind.config = {
      darkMode: 'class'
      theme: { extend: {
        fontFamily: { sans: ['Prompt','sans-serif'] },'
        colors: {
          primary: '#4C51BF', 'primary-focus': '#3c4099','
          secondary: '#38A169', 'secondary-focus': '#2f8a58','
          warning: '#DD6B20', danger: '#E53E3E','
          info: '#3182CE', success: '#38A169','
          gray: { 750: '#2D3748' }'
        },
        animation: { 'pulse-slow': 'pulse 3s cubic-bezier(0.4,0,0.6,1) infinite' }'
      }},
      plugins: [function({ addComponents }) {
        addComponents({
          '.dashboard-card': {'
            borderRadius: '0.75rem', padding: '1.5rem','
            boxShadow: '0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06)','
            transition: 'all 0.3s ease','
            '&:hover': {'
              transform: 'translateY(-2px)','
              boxShadow: '0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05)''
            }
          }
        })
      }]
    }
  </script>

  <!-- 6. DaisyUI Styles -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@2.51.5/dist/full.css" rel="stylesheet" />

  <!-- 7. Icons & Fonts -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.4/css/boxicons.min.css" integrity="sha512-cn16Qw8mzTBKpu08X0fwhTSv02kK/FojjNLz0bwp2xJ4H+yalwzXKFw/5cLzuBZCxGWIA+95X4skzvo8STNtSg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <!-- 8. Chart.js & AOS -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" integrity="sha512-1cK78a1o+ht2JcaW6g8OXYwqpev9+6GqOkz9xmBN9iUUhIndKtxwILGWYOSibOKjLsEdjyjZvYDq/cZwNeak0w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js" integrity="sha512-A7AYk1fGKX6S2SsHywmPkrnzTZHrgiVT7GcQkLGDe2ev0aWb8zejytzS8wjo7PGEXKqJOrjQ4oORtnimIRZBtw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <!-- 9. Custom Styles -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap');'
    
    body {
      font-family: 'Prompt', sans-serif;'
    }
    
    /* Chart period button active state */
    .chart-period-btn.active {
      color: #4C51BF;
      background-color: #EBF4FF;
    }
    
    .dark .chart-period-btn.active {
      color: #8da2fb;
      background-color: #2D3748;
    }
    
    /* Transition effects */
    .transition-all {
      transition-property: all;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-duration: 300ms;
    }
    
    /* Mobile sidebar */
    @media (max-width: 1023px) {
      #sidebar {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        z-index: 50;
        transform: translateX(-100%);
      }
      
      #sidebar.open {
        transform: translateX(0);
      }
    }
  </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-300">

  <!-- Toggle Sidebar Button -->
  <button id="btnToggleMenu"
          class="fixed left-0 top-1/2 bg-blue-600 text-white p-2 rounded-r-full shadow-lg z-50 hover:bg-blue-700">
    <i id="toggleIcon" class="bi bi-chevron-left"></i>
  </button>

  <div class="min-h-screen flex">

    <!-- Sidebar -->
    <aside id="sidebar" class="w-64 bg-white dark:bg-gray-800 flex flex-col transition-all duration-300 -ml-64">
      <a href="dashboard">
        <div class="p-4 border-b border-gray-200 dark:border-gray-700">
          <img src="/uploads/Logo2.png" alt="Logo" class="w-full h-auto"/>
        </div>
      </a>
      <div class="flex-1 p-4 overflow-y-auto">
        <ul class="flex flex-col w-full space-y-1">
          <li>
            <a href="dashboard" class="flex items-center h-12 px-4 rounded-lg bg-gray-100 dark:bg-gray-700">
              <i class="bi bi-speedometer2 text-xl text-indigo-600 dark:text-indigo-400"></i>
              <span class="ml-3">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</span>
            </a>
          </li>
          <li>
            <a href="news-management" class="flex items-center h-12 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-newspaper text-xl text-blue-500 dark:text-blue-400"></i>
              <span class="ml-3">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</span>
            </a>
          </li>
          <li>
            <a href="categories" class="flex items-center h-12 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-folder2 text-xl text-green-500 dark:text-green-400"></i>
              <span class="ml-3">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</span>
            </a>
          </li>
          <li>
            <a href="settings" class="flex items-center h-12 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-gear text-xl text-gray-600 dark:text-gray-300"></i>
              <span class="ml-3">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
            </a>
          </li>
          <li class="mt-6">
            <button id="btnToggleDark" class="flex items-center h-12 px-4 rounded-lg w-full text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-moon text-xl text-slate-600 dark:text-slate-300"></i>
              <span class="ml-3" id="darkModeLabel">Dark Mode</span>
            </button>
          </li>
          <li>
            <button id="btnLogoutSidebar" class="flex items-center h-12 px-4 rounded-lg w-full text-left text-red-500 hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-box-arrow-right text-xl"></i>
              <span class="ml-3">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
            </button>
          </li>
          <!-- Profile (‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å API) -->
          <li class="my-px">
            <div id="profile"
                 class="flex flex-row items-center h-12 px-4 w-full rounded-lg bg-white text-gray-700 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700 text-left transition">
              <div class="avatar mr-3 -ml-4">
                <div class="w-10 rounded-full">
                  <img id="employeePhoto" src="" alt="Employee Photo" />
                </div>
              </div>
              <span class="ml-3" id="employeeName">Loading...</span>
            </div>
          </li>
        </ul>
      </div>
    </aside>
  

    <!-- Main Content -->
    <main class="flex-1 p-6 overflow-y-auto bg-gray-50 dark:bg-gray-900" id="mainContent">
      <!-- Top Bar -->
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-center">
          <h2 class="text-xl font-bold text-gray-800 dark:text-gray-200"><i class="bi bi-speedometer2 text-indigo-600 mr-2"></i>‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</h2>
          <h1 id="welcomeMessage" class="text-lg font-medium mb-4"></h1>
          <span id="currentDate" class="text-sm text-gray-500 dark:text-gray-400"></span>
        </div>
        <div class="flex items-center gap-4">
      
          <div class="relative">
            <button id="notificationBtn" class="btn btn-outline relative"><i class="bi bi-bell"></i><span id="unreadNotifications" class="badge-notification absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-1">3</span></button>
            <div id="notificationDropdown" class="hidden absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden z-50 animate-fadeIn">
              <h3 class="p-3 font-semibold border-b border-gray-200 dark:border-gray-700">‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
              <div class="p-3 space-y-3">
                <div class="flex items-start">
                  <div class="bg-blue-100 text-blue-600 p-2 rounded-lg mr-3"><i class="bi bi-chat-dots"></i></div>
                  <div>
                    <p class="font-medium">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÉ‡∏´‡∏°‡πà</p>
                    <p class="text-sm text-gray-500 dark:text-gray-300">‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÉ‡∏´‡∏°‡πà 5 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</p>
                    <p class="text-xs text-gray-400 mt-1">2 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</p>
                  </div>
                </div>
                <div class="flex items-start">
                  <div class="bg-amber-100 text-amber-600 p-2 rounded-lg mr-3"><i class="bi bi-person-plus"></i></div>
                  <div>
                    <p class="font-medium">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà</p>
                    <p class="text-sm text-gray-500 dark:text-gray-300">‡∏°‡∏µ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô 3 ‡∏Ñ‡∏ô</p>
                    <p class="text-xs text-gray-400 mt-1">1 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</p>
                  </div>
                </div>
                <div class="flex items-start">
                  <div class="bg-green-100 text-green-600 p-2 rounded-lg mr-3"><i class="bi bi-graph-up"></i></div>
                  <div>
                    <p class="font-medium">‡∏¢‡∏≠‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</p>
                    <p class="text-sm text-gray-500 dark:text-gray-300">‡∏Ç‡πà‡∏≤‡∏ß "‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡πÉ‡∏´‡∏°‡πà" ‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°‡∏™‡∏π‡∏á‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥</p>
                    <p class="text-xs text-gray-400 mt-1">3 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</p>
                  </div>
                </div>
              </div>
              <a href="notifications" class="block text-center text-indigo-600 py-2 border-t border-gray-200 dark:border-gray-700">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a>
            </div>
          
          </div>
        
        </div>
      </div>

     
      <!-- Dashboard Stats -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <div class="card p-4 bg-white dark:bg-gray-800 rounded-lg shadow">
          <div class="flex items-center mb-2">
            <div class="bg-indigo-100 text-indigo-600 p-3 rounded-lg mr-3">
              <i class="bi bi-newspaper text-xl"></i>
            </div>
            <div>
              <h3 class="text-gray-500 dark:text-gray-300 text-sm">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
              <p id="totalNews" class="text-2xl font-bold">0</p>
            </div>
          </div>
          <p class="text-xs text-gray-500 dark:text-gray-400">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</p>
        </div>
        <div class="card p-4 bg-white dark:bg-gray-800 rounded-lg shadow">
          <div class="flex items-center mb-2">
            <div class="bg-amber-100 text-amber-600 p-3 rounded-lg mr-3">
              <i class="bi bi-star text-xl"></i>
            </div>
            <div>
              <h3 class="text-gray-500 dark:text-gray-300 text-sm">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</h3>
              <p id="featuredNews" class="text-2xl font-bold">0</p>
            </div>
          </div>
           <p class="text-xs text-gray-500 dark:text-gray-400">‡∏ï‡∏¥‡∏î‡∏î‡∏≤‡∏ß/‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</p>
        </div>
        <div class="card p-4 bg-white dark:bg-gray-800 rounded-lg shadow">
          <div class="flex items-center mb-2">
            <div class="bg-green-100 text-green-600 p-3 rounded-lg mr-3">
              <i class="bi bi-eye text-xl"></i>
            </div>
            <div>
              <h3 class="text-gray-500 dark:text-gray-300 text-sm">‡∏¢‡∏≠‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°‡∏£‡∏ß‡∏°</h3>
              <p id="totalViews" class="text-2xl font-bold">0</p>
            </div>
          </div>
           <p class="text-xs text-gray-500 dark:text-gray-400">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
        </div>
        <div class="card p-4 bg-white dark:bg-gray-800 rounded-lg shadow">
          <div class="flex items-center mb-2">
            <div class="bg-blue-100 text-blue-600 p-3 rounded-lg mr-3">
              <i class="bi bi-people text-xl"></i>
            </div>
            <div>
              <h3 class="text-gray-500 dark:text-gray-300 text-sm">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
              <p id="totalMembers" class="text-2xl font-bold">0</p>
            </div>
          </div>
          <p class="text-xs text-gray-500 dark:text-gray-400"><span id="activeMembers">0</span> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
        </div>
      </div>

   

      <!-- Upcoming Events & Latest News -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
        <!-- Upcoming Events -->
        <div class="card p-5 bg-white dark:bg-gray-800 rounded-lg shadow">
          <div class="flex justify-between items-center mb-4"><h3 class="font-semibold text-lg"><i class="bi bi-calendar-event text-indigo-600 mr-2"></i>‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏°‡∏≤‡∏ñ‡∏∂‡∏á</h3><a href="events.html" class="text-sm text-indigo-600">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a></div>
          <div id="upcomingEvent" class="flex items-center mb-4">
            <div class="calendar-day calendar-day-holiday mr-4">
              <span class="text-xs">‡∏û.‡∏Ñ.</span><div class="text-xl font-bold">20</div>
            </div>
            <div>
              <h4 class="font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà</h4>
              <p class="text-sm text-gray-500 dark:text-gray-300">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</p>
            </div>
          </div>
          <div class="flex items-center mb-4">
            <div class="calendar-day mr-4">
              <span class="text-xs">‡∏û.‡∏Ñ.</span><div class="text-xl font-bold">25</div>
            </div>
            <div>
              <h4 class="font-medium">‡πÅ‡∏ñ‡∏•‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™ 2</h4>
              <p class="text-sm text-gray-500 dark:text-gray-300">9:00 - 12:00 ‡∏ô. ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏° A</p>
            </div>
          </div>
          <div class="flex items-center">
            <div class="calendar-day mr-4">
              <span class="text-xs">‡∏°‡∏¥.‡∏¢.</span><div class="text-xl font-bold">5</div>
            </div>
            <div>
              <h4 class="font-medium">‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</h4>
              <p class="text-sm text-gray-500 dark:text-gray-300">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà</p>
            </div>
          </div>
        </div>

        <!-- Latest News -->
        <div class="card p-5 bg-white dark:bg-gray-800 rounded-lg shadow">
          <div class="flex justify-between items-center mb-4">
            <h3 class="font-semibold text-lg"><i class="bi bi-newspaper text-indigo-600 mr-2"></i>‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
            <a href="all_news.html" class="text-sm text-indigo-600">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a>
          </div>
          <div id="latestNewsContainer" class="space-y-4">
            <div class="p-3 border-l-4 border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 rounded">
              <div class="flex justify-between">
                <h4 class="font-medium">‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÉ‡∏´‡∏°‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h4>
                <span class="text-xs text-gray-500">3 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</span>
              </div>
              <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏á‡∏Å‡∏≤‡∏£...</p>
            </div>
            <div class="p-3 border-l-4 border-amber-500 bg-amber-50 dark:bg-amber-900/20 rounded">
              <div class="flex justify-between">
                <h4 class="font-medium">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°‡∏ó‡∏∏‡∏ô‡∏Å‡∏±‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®</h4>
                <span class="text-xs text-gray-500">5 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</span>
              </div>
              <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡∏Å‡∏±‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏à‡∏≤‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Stats Chart -->
      <div class="mt-6">
        <div class="card p-5 bg-white dark:bg-gray-800 rounded-lg shadow">
          <div class="flex justify-between items-center mb-4">
            <h3 class="font-semibold text-lg"><i class="bi bi-bar-chart-line text-indigo-600 mr-2"></i>‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏¢‡∏≠‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°</h3>
            <div class="flex space-x-2">
              <button class="px-3 py-1 text-xs rounded-full bg-indigo-100 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-200">‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</button>
              <button class="px-3 py-1 text-xs rounded-full text-gray-500 dark:text-gray-300">‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</button>
              <button class="px-3 py-1 text-xs rounded-full text-gray-500 dark:text-gray-300">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
            </div>
          </div>
          <div class="h-64 flex items-end justify-between px-2">
            <div class="flex flex-col items-center">
              <div class="w-8 bg-indigo-500 dark:bg-indigo-400 rounded-t" style="height: 40%"></div>
              <span class="text-xs mt-2">‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå</span>
            </div>
            <div class="flex flex-col items-center">
              <div class="w-8 bg-indigo-500 dark:bg-indigo-400 rounded-t" style="height: 65%"></div>
              <span class="text-xs mt-2">‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£</span>
            </div>
            <div class="flex flex-col items-center">
              <div class="w-8 bg-indigo-500 dark:bg-indigo-400 rounded-t" style="height: 85%"></div>
              <span class="text-xs mt-2">‡∏û‡∏∏‡∏ò</span>
            </div>
            <div class="flex flex-col items-center">
              <div class="w-8 bg-indigo-500 dark:bg-indigo-400 rounded-t" style="height: 75%"></div>
              <span class="text-xs mt-2">‡∏û‡∏§‡∏´‡∏±‡∏™</span>
            </div>
            <div class="flex flex-col items-center">
              <div class="w-8 bg-indigo-500 dark:bg-indigo-400 rounded-t" style="height: 55%"></div>
              <span class="text-xs mt-2">‡∏®‡∏∏‡∏Å‡∏£‡πå</span>
            </div>
            <div class="flex flex-col items-center">
              <div class="w-8 bg-indigo-500 dark:bg-indigo-400 rounded-t" style="height: 25%"></div>
              <span class="text-xs mt-2">‡πÄ‡∏™‡∏≤‡∏£‡πå</span>
            </div>
            <div class="flex flex-col items-center">
              <div class="w-8 bg-indigo-500 dark:bg-indigo-400 rounded-t" style="height: 15%"></div>
              <span class="text-xs mt-2">‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent News Table -->
      <div class="card p-5 bg-white dark:bg-gray-800 rounded-lg shadow mt-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="font-semibold text-lg"><i class="bi bi-newspaper text-indigo-600 mr-2"></i>‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
          <a href="news_management" class="text-sm text-indigo-600">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a>
        </div>
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead>
              <tr class="text-left border-b dark:border-gray-700">
                <th class="pb-3">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</th>
                <th class="pb-3">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>
                <th class="pb-3">‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô</th>
                <th class="pb-3">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                <th class="pb-3">‡∏¢‡∏≠‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°</th>
                <th class="pb-3">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
              </tr>
            </thead>
            <tbody id="recentNewsTableBody">
              <!-- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• - ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á -->
              <tr class="border-b dark:border-gray-700">
                <td class="py-3">
                  <div class="flex items-center">
                    <span>‡πÄ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</span>
                  </div>
                </td>
                <td>‡∏Ç‡πà‡∏≤‡∏ß‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</td>
                <td>admin</td>
                <td>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                    <span class="status-indicator status-active"></span>‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡πÅ‡∏•‡πâ‡∏ß
                  </span>
                </td>
                <td>1,234</td>
                <td>
                  <div class="flex space-x-2">
                    <button class="text-blue-500 hover:text-blue-700" title="‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"><i class="bi bi-eye"></i></button>
                    <button class="text-green-500 hover:text-green-700" title="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"><i class="bi bi-pencil"></i></button>
                    <button class="text-red-500 hover:text-red-700" title="‡∏•‡∏ö"><i class="bi bi-trash"></i></button>
                  </div>
                </td>
              </tr>
              <tr class="border-b dark:border-gray-700">
                <td class="py-3">
                  <div class="flex items-center">
                    <span>‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏ú‡∏π‡πâ‡∏ñ‡∏∑‡∏≠‡∏´‡∏∏‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏õ‡∏µ 2568</span>
                  </div>
                </td>
                <td>‡∏Ç‡πà‡∏≤‡∏ß‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£</td>
                <td>editor1</td>
                <td>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200">
                    <span class="status-indicator status-featured"></span>‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
                  </span>
                </td>
                <td>856</td>
                <td>
                  <div class="flex space-x-2">
                    <button class="text-blue-500 hover:text-blue-700" title="‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"><i class="bi bi-eye"></i></button>
                    <button class="text-green-500 hover:text-green-700" title="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"><i class="bi bi-pencil"></i></button>
                    <button class="text-red-500 hover:text-red-700" title="‡∏•‡∏ö"><i class="bi bi-trash"></i></button>
                  </div>
                </td>
              </tr>
              <tr>
                <td class="py-3">
                  <div class="flex items-center">
                    <span>‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏ï‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏õ‡∏µ 2568</span>
                  </div>
                </td>
                <td>‡∏ö‡∏ó‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</td>
                <td>analyst</td>
                <td>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200">
                    <span class="status-indicator status-draft"></span>‡πÅ‡∏ö‡∏ö‡∏£‡πà‡∏≤‡∏á
                  </span>
                </td>
                <td>0</td>
                <td>
                  <div class="flex space-x-2">
                    <button class="text-blue-500 hover:text-blue-700" title="‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"><i class="bi bi-eye"></i></button>
                    <button class="text-green-500 hover:text-green-700" title="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"><i class="bi bi-pencil"></i></button>
                    <button class="text-red-500 hover:text-red-700" title="‡∏•‡∏ö"><i class="bi bi-trash"></i></button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </main>
  </div>
  
  <!-- 10. App‚Äôs own JavaScript -->
  <script>
    const API_BASE = '/api';'
    const token    = localStorage.getItem('authToken');'

    document.addEventListener('DOMContentLoaded', () => {'
      if (!token) {
        // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏ó‡πÄ‡∏Ñ‡πá‡∏ô ‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ login
        return window.location.href = '/login';'
      }
      // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ Events/News/Notifications
      fetchUserProfile();
      fetchDashboardStats();
      fetchUpcomingEvent();
      fetchLatestNews();
      fetchRecentNewsTable();
      fetchNotifications();
      // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ dark mode ‡πÅ‡∏•‡∏∞ event listeners ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
      checkDarkMode();
      checkSidebarState();
      setupEventListeners();
      setupOutsideClickHandlers();
      setCurrentDate();
    });

    // ====== ‡∏î‡∏∂‡∏á‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ======
    async function fetchUserProfile() {
      try {
        const res  = await fetch(`${API_BASE}/users/me`, {
          headers: { 'Authorization': 'Bearer ' + token }'
        });
        const json = await res.json();
        if (!res.ok || !json.success) {
          // 401 ‚Üí token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‚Üí logout ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ login
          if (res.status === 401) {
            showToast('‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà', 'error');'
            logout();
            return;
          }
          // 403 ‚Üí ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á ‚Üí ‡∏û‡∏≠‡∏Å‡∏•‡∏±‡∏ö Main Home (‡πÑ‡∏°‡πà‡∏•‡πâ‡∏≤‡∏á token)
          if (res.status === 403) {
            showToast('‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£', 'error');'
            setTimeout(() => window.location.href = 'home.html', 1200);'
            return;
          }
          throw new Error(json.message || 'Failed to load profile');'
        }
        


      } catch (err) {
        console.error('fetchUserProfile:', err);'
        alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ: ' + err.message);'
      }
    }

    // ====== ‡∏î‡∏∂‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ Dashboard ======
    async function fetchDashboardStats() {
      try {
        // ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏°‡∏µ API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏£‡∏∏‡∏õ
        const res = await fetch(`${API_BASE}/dashboard/stats`, {
          headers: { 'Authorization': 'Bearer ' + token }'
        });
        
        if (!res.ok) { showToast('‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','error'); return; }'
        
        if (res.status === 401) {
          showToast('‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà', 'error');'
          logout();
          return;
        }
        
        if (res.status === 403) {
          showToast('‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏î‡∏π‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£', 'error');'
          setTimeout(() => window.location.href = 'home.html', 1200);'
          return;
        }
        

const json = await res.json();
        if (json.success) {
          const d = json.data;
          document.getElementById('totalNews').textContent     = d.totalNews;'
          document.getElementById('featuredNews').textContent  = d.featuredNews;'
          document.getElementById('totalViews').textContent    = d.totalViews.toLocaleString();'
          document.getElementById('totalMembers').textContent  = d.totalMembers;'
          document.getElementById('activeMembers').textContent = d.activeMembers;'
        }
      } catch (err) {
        console.error('fetchDashboardStats:', err);'
        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà API ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
        document.getElementById('totalNews').textContent = '124';'
        document.getElementById('featuredNews').textContent = '15';'
        document.getElementById('totalViews').textContent = '45,678';'
        document.getElementById('totalMembers').textContent = '2,456';'
        document.getElementById('activeMembers').textContent = '1,823';'
      }
    }

    // ====== ‡∏î‡∏∂‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏°‡∏≤‡∏ñ‡∏∂‡∏á ======
    async function fetchUpcomingEvent() {
      try {
        const res  = await fetch(`${API_BASE}/events/upcoming`, { headers: { 'Authorization':'Bearer '+token } });'
        if (!res.ok) { showToast('‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','error'); return; }'
        const json = await res.json();
        if (json.success && json.data.length) {
          const ev = json.data[0];
          document.getElementById('upcomingEvent').innerHTML = `'
            <div class="calendar-day mr-4">
              <span class="text-xs">${ev.monthName}</span>
              <div class="text-xl font-bold">${ev.day}</div>
            </div>
            <div>
              <h4 class="font-medium">${ev.title}</h4>
              <p class="text-sm text-gray-500 dark:text-gray-300">${ev.description}</p>
            </div>`;
        } else {
          document.getElementById('upcomingEvent').innerHTML = '<p class="text-sm text-gray-500 dark:text-gray-400">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏°‡∏≤‡∏ñ‡∏∂‡∏á</p>';'
        }
      } catch (e) { console.error('fetchUpcomingEvent:', e); }'
    }

    // ====== ‡∏î‡∏∂‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ======
    async function fetchLatestNews() {
      try {
        const res  = await fetch(`${API_BASE}/news?sort=desc&limit=2`, { headers: { 'Authorization':'Bearer '+token } });'
        if (!res.ok) { showToast('‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πà‡∏≤‡∏ß‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','error'); return; }'
        const json = await res.json();
        const container = document.getElementById('latestNewsContainer');'
        if (json.success && json.data.length) {
          container.innerHTML = json.data.map(n => `
           <div class="p-3 border-l-4 ${n.isFeatured?'border-amber-500 bg-amber-50 dark:bg-amber-900/20':'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20'} rounded">'
              <div class="flex justify-between">
                <h4 class="font-medium">${n.title}</h4>
                <span class="text-xs text-gray-500">${n.daysAgo} ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</span>
              </div>
              <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">${n.summary}</p>
            </div>
          `).join('');'
        } else {
          container.innerHTML = '<p class="text-sm text-gray-500 dark:text-gray-400">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</p>';'
        }
      } catch (e) { console.error('fetchLatestNews:', e); }'
    }

   // ====== ‡∏î‡∏∂‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ======
    async function fetchRecentNewsTable() {
      try {
        const res  = await fetch(`${API_BASE}/news?limit=5`, { headers: { 'Authorization':'Bearer '+token } });'
        if (!res.ok) { showToast('‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','error'); return; }'
        const json = await res.json();
        const tbody = document.getElementById('recentNewsTableBody');'
        if (json.success && json.data.length) {
          tbody.innerHTML = json.data.map(n => `
            <tr class="border-b dark:border-gray-700">
              <td class="py-3"><span>${n.title}</span></td>
              <td>${n.category}</td>
              <td>${n.author}</td>
              <td><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.statusClass}">${n.statusLabel}</span></td>
              <td>${n.views.toLocaleString()}</td>
              <td>
                <div class="flex space-x-2">
                  <button onclick="location.href='news/${n._id}'"><i class="bi bi-eye"></i></button>'
                 <button onclick="location.href='news/edit/${n._id}'"><i class="bi bi-pencil"></i></button>'
                  <button onclick="deleteNews('${n._id}')"><i class="bi bi-trash"></i></button>'
                </div>
              </td>
            </tr>
          `).join('');'
        } else {
          tbody.innerHTML = `<tr><td colspan="6" class="py-4 text-center text-gray-500 dark:text-gray-400">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</td></tr>`;
        }
      } catch (e) { console.error('fetchRecentNewsTable:', e); }'
    }

    // ====== ‡∏î‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ======
    async function fetchNotifications() {
      try {
        const res  = await fetch(`${API_BASE}/notifications`, { headers: { 'Authorization':'Bearer '+token } });'
        if (!res.ok) { showToast('‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','error'); return; }'
        const json = await res.json();
        if (res.ok && json.success) {
          document.getElementById('unreadNotifications').textContent = json.data.length;'
          const list = json.data.map(n => `
            <div class="flex items-start">
              <div class="p-2 rounded-lg mr-3">${n.icon}</div>
              <div>
                <p class="font-medium">${n.title}</p>
                <p class="text-sm text-gray-500 dark:text-gray-300">${n.message}</p>
                <p class="text-xs text-gray-400 mt-1">${n.timeAgo}</p>
              </div>
            </div>
          `).join('');'
          document.querySelector('#notificationDropdown .p-3.space-y-3').innerHTML = list;'
        }
      } catch (e) { console.error('fetchNotifications:', e); }'
    }
    
    // ====== ‡∏•‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£ (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á) ======
    async function deleteNews(id) {
      if (!confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏ô‡∏µ‡πâ?')) return;'
      await fetch(`${API_BASE}/news/${id}`, { method: 'DELETE', headers: { 'Authorization':'Bearer '+token } });'
      fetchRecentNewsTable();
    }

    // ====== ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ======
    function setCurrentDate() {
      const months = ["‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå","‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°","‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô","‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°","‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô",
                      "‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°","‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô","‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°","‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô","‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"];
      const now   = new Date();
      const day   = now.getDate();
      const month = months[now.getMonth()];
      const year  = now.getFullYear() + 543;
      const el = document.getElementById('currentDate');'
      if(el) el.textContent = `${day} ${month} ${year}`;
    }

    // ====== Dark Mode ======
    function checkDarkMode() {
      const dark = localStorage.getItem('darkMode') === 'true';'
      document.documentElement.classList.toggle('dark', dark);'
      const label = document.getElementById('darkModeLabel');'
      if(label) label.textContent = dark ? 'Light Mode' : 'Dark Mode';'
    }

    // ====== Sidebar State ======
    function checkSidebarState() {
      const collapsed = localStorage.getItem('sidebarCollapsed') === 'true';'
      if (collapsed) {
        const sidebar = document.getElementById('sidebar');'
        const icon    = document.getElementById('toggleIcon');'
        sidebar.classList.add('-ml-64');'
        icon.classList.replace('bi-chevron-left','bi-chevron-right');'
      }
    }

    // ====== Event Listeners ======
    function setupEventListeners() {
      const sidebar     = document.getElementById('sidebar');'
      const btnToggle   = document.getElementById('btnToggleMenu');'
      const toggleIcon  = document.getElementById('toggleIcon');'
      const btnToggleDark = document.getElementById('btnToggleDark');'
      const notificationBtn = document.getElementById('notificationBtn');'
      const userBtn = document.getElementById('userBtn');'
      const btnLogoutSidebar = document.getElementById('btnLogoutSidebar');'
      const btnLogoutDropdown = document.getElementById('btnLogoutDropdown');'

      const cardAddNews = document.getElementById('cardAddNews');'
      const cardManageCategories = document.getElementById('cardManageCategories');'
      const cardViewAnalytics = document.getElementById('cardViewAnalytics');'
      const btnViewNotificationsWelcome = document.getElementById('btnViewNotificationsWelcome');'
      const btnCreateNewsWelcome = document.getElementById('btnCreateNewsWelcome');'

      // Toggle Sidebar
      btnToggle.addEventListener('click', () => {'
        sidebar.classList.toggle('-ml-64');'
        const isCollapsed = sidebar.classList.contains('-ml-64');'
        toggleIcon.classList.toggle('bi-chevron-right', isCollapsed);'
        toggleIcon.classList.toggle('bi-chevron-left', !isCollapsed);'
        localStorage.setItem('sidebarCollapsed', isCollapsed);'
      });

      if(btnToggleDark) btnToggleDark.addEventListener('click', () => {'
        const isDark = document.documentElement.classList.toggle('dark');'
        localStorage.setItem('darkMode', isDark);'
        const label = document.getElementById('darkModeLabel');'
        if(label) label.textContent = isDark ? 'Light Mode' : 'Dark Mode';'
      });

      if(notificationBtn) notificationBtn.addEventListener('click', e => {'
        e.stopPropagation();
        document.getElementById('notificationDropdown')?.classList.toggle('hidden');'
        document.getElementById('userDropdown')?.classList.add('hidden');'
      });

      if(userBtn) userBtn.addEventListener('click', e => {'
        e.stopPropagation();
        document.getElementById('userDropdown')?.classList.toggle('hidden');'
        document.getElementById('notificationDropdown')?.classList.add('hidden');'
      });

      if(btnLogoutSidebar) btnLogoutSidebar.addEventListener('click', logout);'
      if(btnLogoutDropdown) btnLogoutDropdown.addEventListener('click', logout);'

      // Quick Action Cards
      if(cardAddNews) cardAddNews.addEventListener('click', () => window.location.href = 'create_news.html');'
      if(cardManageCategories) cardManageCategories.addEventListener('click', () => window.location.href = 'categories.html');'
      if(cardViewAnalytics) cardViewAnalytics.addEventListener('click', () => window.location.href = 'analytics.html');'
      
      // Welcome banner buttons
      if(btnViewNotificationsWelcome) btnViewNotificationsWelcome.addEventListener('click', () => window.location.href = 'notifications.html');'
      if(btnCreateNewsWelcome) btnCreateNewsWelcome.addEventListener('click', () => window.location.href = 'create_news.html');'
    }

    // ====== ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏≠‡∏Å dropdown ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π ======
    function setupOutsideClickHandlers() {
      document.addEventListener('click', e => {'
        const notificationDropdown = document.getElementById('notificationDropdown');'
        const userDropdown = document.getElementById('userDropdown');'

        if (notificationDropdown && !e.target.closest('#notificationBtn') && !e.target.closest('#notificationDropdown')) {'
          notificationDropdown.classList.add('hidden');'
        }
        if (userDropdown && !e.target.closest('#userBtn') && !e.target.closest('#userDropdown')) {'
          userDropdown.classList.add('hidden');'
        }
      });
    }

    // ====== ‡πÅ‡∏™‡∏î‡∏á Toast Message ======
    function showToast(message, type = 'info') {'
    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ library ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡πÜ (‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∑‡πà‡∏ô) ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ
    if (typeof window._toastLibrary === 'function') {'
      window._toastLibrary(message, type);
      return;
    }
    // ‡∏°‡∏¥‡∏â‡∏∞‡∏ô‡∏±‡πâ‡∏ô fallback ‡πÄ‡∏õ‡πá‡∏ô alert ‡∏õ‡∏Å‡∏ï‡∏¥
    alert(message);
  }

    // ====== Logout ======
    function logout(showAlert = true) {
      const btnSidebar = document.getElementById('btnLogoutSidebar');'
      const btnDropdown = document.getElementById('btnLogoutDropdown');'
      const userBtnAvatar = document.getElementById('userBtn');'

      if(btnSidebar) btnSidebar.innerHTML = '<span class="loading loading-spinner loading-sm mx-auto"></span>';'
      if(btnDropdown) btnDropdown.innerHTML = '<span class="loading loading-spinner loading-sm mx-auto"></span> <span class="ml-2">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏Å...</span>';'
      if(userBtnAvatar) userBtnAvatar.innerHTML = '<div class="w-8 h-8 rounded-full flex items-center justify-center"><span class="loading loading-spinner loading-xs"></span></div>';'

      setTimeout(() => {
        localStorage.removeItem('authToken');'
        localStorage.removeItem('userId');'
        localStorage.removeItem('darkMode');'
        if (showAlert) {
          alert('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß');'
        }
        window.location.href = '/login';'
      }, 500);
    }
  </script>

  <!-- ‡∏≠‡πà‡∏≤‡∏ô userInfo ‡∏à‡∏≤‡∏Å localStorage ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏π‡∏õ‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô sidebar -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {'
      const stored = JSON.parse(localStorage.getItem('userInfo') || '{}');'
      if (stored.name) {
        document.getElementById('employeeName').textContent = stored.name;'
      }
      if (stored.photoUrl) {
        document.getElementById('employeePhoto').src = stored.photoUrl;'
      }
    });
  </script>
</body>
</html>