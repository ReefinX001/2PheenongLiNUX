<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>การตั้งค่า - ระบบการตลาด</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- User Profile Manager -->
  <script src="/views/marketing/js/user-profile.js"></script>
  <!-- Sidebar Manager -->
  <script src="/views/marketing/js/sidebar.js"></script>

  <!-- Favicon ต่างๆ -->
  <link rel="icon" href="/favicon/favicon.ico" type="image/x-icon" />
  
  <!-- Google Fonts - Prompt -->
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind + DaisyUI -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'Prompt', 'sans-serif'],
            prompt: ['Prompt', 'sans-serif'],
          },
          boxShadow: {
            'lux': '0 8px 32px 0 rgba(31, 38, 135, 0.18)'
          }
        },
      },
      daisyui: {
        themes: ['luxury', 'dark', 'corporate'],
      },
    };
  </script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@2.51.5/dist/full.css" rel="stylesheet" />
  
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />

  <!-- Animate.css for fade animations -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <!-- Lottie for animations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
  
  <style>
    /* เพิ่ม CSS สำหรับความสวยงาม */
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .animate-fadeIn {
      animation: fadeIn 0.3s ease-in-out;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    .dark ::-webkit-scrollbar-track {
      background: #1e1e1e;
    }

    ::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #555;
    }

    /* Main content */
    .main-content {
      flex: 1;
      padding: 20px 30px;
      overflow-y: auto;
    }
    
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }
    
    .page-title h1 {
      font-size: 1.8rem;
      margin-bottom: 5px;
    }
    
    .page-title p {
      font-size: 0.9rem;
    }

    /* Settings Styles */
    .settings-card {
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      margin-bottom: 24px;
      overflow: hidden;
    }
    
    .dark .settings-card {
      background-color: #1f2937;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }
    
    .settings-header {
      display: flex;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .dark .settings-header {
      border-bottom-color: #374151;
    }
    
    .settings-icon {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
      color: white;
    }
    
    .icon-user {
      background-color: #8b5cf6;
    }
    
    .icon-notification {
      background-color: #10b981;
    }
    
    .icon-security {
      background-color: #ef4444;
    }
    
    .icon-integration {
      background-color: #3b82f6;
    }
    
    .icon-team {
      background-color: #f97316;
    }
    
    .icon-general {
      background-color: #6b7280;
    }
    
    .settings-title {
      font-size: 1.1rem;
      font-weight: 600;
    }
    
    .settings-content {
      padding: 20px;
    }
    
    .settings-section {
      margin-bottom: 24px;
    }
    
    .settings-section:last-child {
      margin-bottom: 0;
    }
    
    .settings-section-title {
      font-size: 1rem;
      font-weight: 500;
      margin-bottom: 16px;
      color: #4b5563;
    }
    
    .dark .settings-section-title {
      color: #d1d5db;
    }
    
    .form-group {
      margin-bottom: 16px;
    }
    
    .form-group label {
      display: block;
      font-size: 0.9rem;
      margin-bottom: 6px;
      color: #4b5563;
    }
    
    .dark .form-group label {
      color: #9ca3af;
    }
    
    .form-control {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      color: #111827;
      background-color: white;
    }
    
    .dark .form-control {
      border-color: #4b5563;
      background-color: #374151;
      color: #f3f4f6;
    }
    
    .form-control:focus {
      border-color: #6b7280;
      outline: none;
    }
    
    .dark .form-control:focus {
      border-color: #9ca3af;
    }
    
    .avatar-upload {
      display: flex;
      align-items: center;
    }
    
    .avatar-preview {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      overflow: hidden;
      margin-right: 20px;
    }
    
    .avatar-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 24px;
    }
    
    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #e5e7eb;
      transition: 0.4s;
      border-radius: 24px;
    }
    
    .dark .toggle-slider {
      background-color: #4b5563;
    }
    
    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }
    
    input:checked + .toggle-slider {
      background-color: #10b981;
    }
    
    input:checked + .toggle-slider:before {
      transform: translateX(24px);
    }
    
    .settings-action {
      display: flex;
      justify-content: flex-end;
      padding-top: 16px;
      border-top: 1px solid #e5e7eb;
      margin-top: 16px;
    }
    
    .dark .settings-action {
      border-top-color: #374151;
    }
    
    .user-list {
      max-height: 300px;
      overflow-y: auto;
    }
    
    .user-item {
      display: flex;
      align-items: center;
      padding: 12px;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .dark .user-item {
      border-bottom-color: #374151;
    }
    
    .user-item:last-child {
      border-bottom: none;
    }
    
    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 12px;
    }
    
    .user-info {
      flex: 1;
    }
    
    .user-name {
      font-weight: 500;
    }
    
    .user-email {
      font-size: 0.85rem;
      color: #6b7280;
    }
    
    .dark .user-email {
      color: #9ca3af;
    }
    
    .user-role {
      padding: 4px 8px;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
      background-color: #f3f4f6;
      color: #4b5563;
    }
    
    .dark .user-role {
      background-color: #374151;
      color: #9ca3af;
    }
    
    .role-admin {
      background-color: #fee2e2;
      color: #b91c1c;
    }
    
    .dark .role-admin {
      background-color: rgba(185, 28, 28, 0.2);
      color: #fca5a5;
    }
    
    .role-manager {
      background-color: #e0e7ff;
      color: #4338ca;
    }
    
    .dark .role-manager {
      background-color: rgba(67, 56, 202, 0.2);
      color: #a5b4fc;
    }
    
    .role-editor {
      background-color: #fef3c7;
      color: #92400e;
    }
    
    .dark .role-editor {
      background-color: rgba(146, 64, 14, 0.2);
      color: #fcd34d;
    }
    .loading-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(255, 255, 255, 0.9);
      display: flex; justify-content: center; align-items: center;
      z-index: 9999;
      backdrop-filter: blur(12px);
    }
  </style>

  <script>
    let lottieAnimation = null;
  </script>
</head>

<body class="bg-white text-gray-700 dark:bg-gray-700 dark:text-gray-200">
  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay animate__animated animate__fadeOut" style="display: none;">
    <div class="text-center">
      <div id="lottieContainer" class="w-96 h-96 mx-auto flex items-center justify-center"></div>
    </div>
  </div>
  <!-- Toggle Sidebar Button -->
  <button id="btnToggleMenu" class="fixed left-0 top-1/2 bg-blue-600 text-white p-2 rounded-r-full shadow-lg z-50 hover:bg-blue-700">
    <i class="bi bi-chevron-left"></i>
  </button>

  <div class="min-h-screen flex">
    <!-- Sidebar Container -->
    <div id="sidebar-container">
      <!-- Sidebar content will be loaded here -->
    </div>
      <div class="flex-1 p-4 overflow-y-auto">
        <ul class="flex flex-col w-full space-y-1">
          <li>
            <a href="marketing_dashboard" class="flex items-center h-12 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-graph-up-arrow text-xl text-indigo-600 dark:text-indigo-400"></i>
              <span class="ml-3">แดชบอร์ด</span>
            </a>
          </li>
          <li>
            <a href="campaigns" class="flex items-center h-12 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-megaphone-fill text-xl text-orange-500 dark:text-orange-400"></i>
              <span class="ml-3">แคมเปญ</span>
            </a>
          </li>
          <li>
            <a href="analytics" class="flex items-center h-12 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-bar-chart-line text-xl text-blue-500 dark:text-blue-400"></i>
              <span class="ml-3">วิเคราะห์ข้อมูล</span>
            </a>
          </li>
          <li>
            <a href="content_management" class="flex items-center h-12 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-file-earmark-richtext text-xl text-teal-500 dark:text-teal-400"></i>
              <span class="ml-3">จัดการเนื้อหา</span>
            </a>
          </li>
          <li>
            <a href="social_media" class="flex items-center h-12 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-share-fill text-xl text-purple-500 dark:text-purple-400"></i>
              <span class="ml-3">สื่อสังคม</span>
            </a>
          </li>
          <li>
            <a href="customer_data" class="flex items-center px-4 h-12 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-people text-xl text-pink-500 dark:text-pink-400 mr-3"></i>
              <span>ข้อมูลลูกค้า</span>
            </a>
          </li>
          <li>
            <a href="budget_reports" class="flex items-center px-4 h-12 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-cash-coin text-xl text-emerald-500 dark:text-emerald-400 mr-3"></i>
              <span>งบประมาณและรายงาน</span>
            </a>
          </li>
          <li class="mt-4">
            <a href="marketing_settings" class="flex items-center h-12 px-4 rounded-lg bg-gray-100 dark:bg-gray-700">
              <i class="bi bi-gear text-xl text-gray-600 dark:text-gray-300"></i>
              <span class="ml-3">การตั้งค่า</span>
            </a>
          </li>
          <li class="mt-6">
            <button id="btnToggleDark" class="flex items-center h-12 px-4 rounded-lg w-full text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-moon text-xl text-slate-600 dark:text-slate-300"></i>
              <span class="ml-3" id="darkModeLabel">Dark Mode</span>
            </button>
          </li>
          <li>
            <button id="btnLogoutSidebar" class="flex items-center h-12 px-4 rounded-lg w-full text-left text-red-500 hover:bg-gray-100 dark:hover:bg-gray-700 transition">
              <i class="bi bi-box-arrow-right text-xl"></i>
              <span class="ml-3">ออกจากระบบ</span>
            </button>
          </li>
          <li>
            <div id="profile" class="flex items-center h-12 px-4 rounded-lg bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700">
              <img id="employeePhoto" src="https://ui-avatars.com/api/?name=reefinX&background=0D9488&color=fff" alt="Employee Photo" class="w-10 h-10 rounded-full mr-3"/>
              <span id="employeeName">reefinX</span>
            </div>
          </li>
        </ul>
      </div>
    </aside>
    
    <!-- Main Content -->
    <div class="main-content">
      <!-- Header -->
      <div class="header">
        <div class="page-title">
          <h1 class="text-2xl font-semibold">การตั้งค่า</h1>
          <p class="text-gray-500 dark:text-gray-400">จัดการการตั้งค่าบัญชีและระบบการตลาดของคุณ</p>
        </div>
        <div class="flex gap-3">
          <div class="text-sm text-gray-500 dark:text-gray-400">
            <span id="currentDateTime">10 พ.ค. 2025 · 15:14:43</span>
          </div>
        </div>
      </div>

      <!-- Profile Settings -->
      <div class="settings-card animate-fadeIn">
        <div class="settings-header">
          <div class="settings-icon icon-user">
            <i class="bi bi-person"></i>
          </div>
          <h2 class="settings-title">ข้อมูลโปรไฟล์</h2>
        </div>
        <div class="settings-content">
          <div class="settings-section">
            <div class="avatar-upload mb-6">
              <div class="avatar-preview">
                <img src="https://ui-avatars.com/api/?name=reefinX&background=0D9488&color=fff" alt="Profile Photo">
              </div>
              <div>
                <button class="bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 py-2 px-4 rounded-md mb-2 w-full">
                  เปลี่ยนรูปโปรไฟล์
                </button>
                <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 text-sm">
                  ลบรูป
                </button>
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="form-group">
                <label for="fullName">ชื่อ-นามสกุล</label>
                <input type="text" id="fullName" class="form-control" value="reefinX">
              </div>
              <div class="form-group">
                <label for="position">ตำแหน่ง</label>
                <input type="text" id="position" class="form-control" value="ผู้จัดการการตลาด">
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="form-group">
                <label for="email">อีเมล</label>
                <input type="email" id="email" class="form-control" value="reefinx@example.com">
              </div>
              <div class="form-group">
                <label for="phone">เบอร์โทรศัพท์</label>
                <input type="tel" id="phone" class="form-control" value="082-XXX-XXXX">
              </div>
            </div>
            <div class="form-group">
              <label for="timezone">โซนเวลา</label>
              <select id="timezone" class="form-control">
                <option value="Asia/Bangkok">เอเชีย/กรุงเทพ (GMT+7)</option>
                <option value="Asia/Tokyo">เอเชีย/โตเกียว (GMT+9)</option>
                <option value="America/New_York">อเมริกา/นิวยอร์ก (GMT-4)</option>
                <option value="Europe/London">ยุโรป/ลอนดอน (GMT+1)</option>
              </select>
            </div>
            <div class="form-group">
              <label for="language">ภาษา</label>
              <select id="language" class="form-control">
                <option value="th">ไทย</option>
                <option value="en">English</option>
                <option value="jp">日本語</option>
                <option value="cn">中文</option>
              </select>
            </div>
          </div>
          <div class="settings-action">
            <button class="bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 py-2 px-4 rounded-md mr-3">
              ยกเลิก
            </button>
            <button class="bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-400 text-white py-2 px-4 rounded-md">
              บันทึก
            </button>
          </div>
        </div>
      </div>

      <!-- Notification Settings -->
      <div class="settings-card animate-fadeIn">
        <div class="settings-header">
          <div class="settings-icon icon-notification">
            <i class="bi bi-bell"></i>
          </div>
          <h2 class="settings-title">การแจ้งเตือน</h2>
        </div>
        <div class="settings-content">
          <div class="settings-section">
            <h3 class="settings-section-title">การแจ้งเตือนทางอีเมล</h3>
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium">รายงานสรุปประจำวัน</p>
                  <p class="text-sm text-gray-500 dark:text-gray-400">ส่งรายงานสรุปกิจกรรมการตลาดประจำวัน</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium">รายงานสรุปประจำสัปดาห์</p>
                  <p class="text-sm text-gray-500 dark:text-gray-400">ส่งรายงานวิเคราะห์ประสิทธิภาพการตลาดประจำสัปดาห์</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium">การแจ้งเตือนแคมเปญ</p>
                  <p class="text-sm text-gray-500 dark:text-gray-400">แจ้งเตือนเมื่อมีการเริ่มหรือสิ้นสุดแคมเปญ</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium">การแจ้งเตือนงบประมาณ</p>
                  <p class="text-sm text-gray-500 dark:text-gray-400">แจ้งเตือนเมื่องบประมาณใกล้หมด (80%)</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
          </div>
          <div class="settings-section">
            <h3 class="settings-section-title">การแจ้งเตือนในระบบ</h3>
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium">เมื่อมีความคิดเห็นใหม่</p>
                  <p class="text-sm text-gray-500 dark:text-gray-400">แจ้งเตือนเมื่อมีความคิดเห็นใหม่บนโพสต์หรือแคมเปญ</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium">เมื่อมีการมอบหมายงาน</p>
                  <p class="text-sm text-gray-500 dark:text-gray-400">แจ้งเตือนเมื่อคุณได้รับมอบหมายงานใหม่</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium">เมื่อมีการอนุมัติ</p>
                  <p class="text-sm text-gray-500 dark:text-gray-400">แจ้งเตือนเมื่อคำขอของคุณได้รับการอนุมัติ</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
          </div>
          <div class="settings-action">
            <button class="bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 py-2 px-4 rounded-md mr-3">
              ยกเลิก
            </button>
            <button class="bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-400 text-white py-2 px-4 rounded-md">
              บันทึก
            </button>
          </div>
        </div>
      </div>

      <!-- Security Settings -->
      <div class="settings-card animate-fadeIn">
        <div class="settings-header">
          <div class="settings-icon icon-security">
            <i class="bi bi-shield-lock"></i>
          </div>
          <h2 class="settings-title">ความปลอดภัย</h2>
        </div>
        <div class="settings-content">
          <div class="settings-section">
            <h3 class="settings-section-title">เปลี่ยนรหัสผ่าน</h3>
            <div class="grid grid-cols-1 gap-4">
              <div class="form-group">
                <label for="currentPassword">รหัสผ่านปัจจุบัน</label>
                <input type="password" id="currentPassword" class="form-control">
              </div>
              <div class="form-group">
                <label for="newPassword">รหัสผ่านใหม่</label>
                <input type="password" id="newPassword" class="form-control">
              </div>
              <div class="form-group">
                <label for="confirmPassword">ยืนยันรหัสผ่านใหม่</label>
                <input type="password" id="confirmPassword" class="form-control">
              </div>
            </div>
            <div class="mt-4">
              <button class="bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-400 text-white py-2 px-4 rounded-md">
                เปลี่ยนรหัสผ่าน
              </button>
            </div>
          </div>
          <div class="settings-section">
            <h3 class="settings-section-title">การยืนยันตัวตนสองชั้น</h3>
            <div class="flex items-center justify-between mb-4">
              <div>
                <p class="font-medium">เปิดใช้งานการยืนยันตัวตนสองชั้น</p>
                <p class="text-sm text-gray-500 dark:text-gray-400">เพิ่มความปลอดภัยให้บัญชีของคุณด้วยการยืนยันตัวตนสองชั้น</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox">
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="p-4 bg-gray-100 dark:bg-gray-800 rounded-md mb-4">
              <p class="text-sm text-gray-500 dark:text-gray-400">การยืนยันตัวตนสองชั้นจะช่วยเพิ่มความปลอดภัยให้กับบัญชีของคุณ โดยจะต้องยืนยันรหัส OTP ที่ส่งไปยังโทรศัพท์มือถือของคุณในทุกครั้งที่เข้าสู่ระบบ</p>
            </div>
          </div>
          <div class="settings-section">
            <h3 class="settings-section-title">การเข้าสู่ระบบล่าสุด</h3>
            <div class="space-y-4">
              <div class="border border-gray-200 dark:border-gray-700 rounded-md p-4">
                <div class="flex justify-between items-center">
                  <div>
                    <p class="font-medium">กรุงเทพ, ประเทศไทย</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">10 พ.ค. 2025, 15:14:43 (อุปกรณ์ปัจจุบัน)</p>
                  </div>
                  <div class="text-green-500">
                    <i class="bi bi-check-circle-fill"></i>
                  </div>
                </div>
                <div class="mt-2 text-sm">
                  <span class="text-gray-500 dark:text-gray-400">IP: 203.0.113.1 | Chrome บน Windows</span>
                </div>
              </div>
              <div class="border border-gray-200 dark:border-gray-700 rounded-md p-4">
                <div class="flex justify-between items-center">
                  <div>
                    <p class="font-medium">กรุงเทพ, ประเทศไทย</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">9 พ.ค. 2025, 09:23:15</p>
                  </div>
                  <div class="text-green-500">
                    <i class="bi bi-check-circle-fill"></i>
                  </div>
                </div>
                <div class="mt-2 text-sm">
                  <span class="text-gray-500 dark:text-gray-400">IP: 203.0.113.1 | Safari บน iOS</span>
                </div>
              </div>
            </div>
          </div>
          <div class="settings-section">
            <button class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-md">
              ออกจากระบบทุกอุปกรณ์
            </button>
          </div>
        </div>
      </div>

      <!-- Integrations Settings -->
      <div class="settings-card animate-fadeIn">
        <div class="settings-header">
          <div class="settings-icon icon-integration">
            <i class="bi bi-broadcast"></i>
          </div>
          <h2 class="settings-title">การเชื่อมต่อและ API</h2>
        </div>
        <div class="settings-content">
          <div class="settings-section">
            <h3 class="settings-section-title">บัญชีโซเชียลมีเดีย</h3>
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <i class="bi bi-facebook text-[#1877f2] text-2xl mr-3"></i>
                  <div>
                    <p class="font-medium">Facebook</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">เชื่อมต่อแล้ว (Brand Page Marketing)</p>
                  </div>
                </div>
                <button class="text-red-500 hover:text-red-700">ยกเลิกการเชื่อมต่อ</button>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <i class="bi bi-instagram text-[#e1306c] text-2xl mr-3"></i>
                  <div>
                    <p class="font-medium">Instagram</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">เชื่อมต่อแล้ว (@brandmarketing)</p>
                  </div>
                </div>
                <button class="text-red-500 hover:text-red-700">ยกเลิกการเชื่อมต่อ</button>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <i class="bi bi-twitter-x text-[#1da1f2] text-2xl mr-3"></i>
                  <div>
                    <p class="font-medium">Twitter/X</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">ยังไม่ได้เชื่อมต่อ</p>
                  </div>
                </div>
                <button class="text-blue-500 hover:text-blue-700">เชื่อมต่อ</button>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <i class="bi bi-linkedin text-[#0a66c2] text-2xl mr-3"></i>
                  <div>
                    <p class="font-medium">LinkedIn</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">ยังไม่ได้เชื่อมต่อ</p>
                  </div>
                </div>
                <button class="text-blue-500 hover:text-blue-700">เชื่อมต่อ</button>
              </div>
            </div>
          </div>
          <div class="settings-section">
            <h3 class="settings-section-title">บริการภายนอก</h3>
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <i class="bi bi-google text-[#4285f4] text-2xl mr-3"></i>
                  <div>
                    <p class="font-medium">Google Analytics</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">เชื่อมต่อแล้ว (UA-XXXXXXXX-X)</p>
                  </div>
                </div>
                <button class="text-red-500 hover:text-red-700">ยกเลิกการเชื่อมต่อ</button>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <i class="bi bi-mailchimp text-[#FFE01B] text-2xl mr-3"></i>
                  <div>
                    <p class="font-medium">Mailchimp</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">เชื่อมต่อแล้ว (marketing@example.com)</p>
                  </div>
                </div>
                <button class="text-red-500 hover:text-red-700">ยกเลิกการเชื่อมต่อ</button>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <i class="bi bi-slack text-[#4A154B] text-2xl mr-3"></i>
                  <div>
                    <p class="font-medium">Slack</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">ยังไม่ได้เชื่อมต่อ</p>
                  </div>
                </div>
                <button class="text-blue-500 hover:text-blue-700">เชื่อมต่อ</button>
              </div>
            </div>
          </div>
          <div class="settings-section">
            <h3 class="settings-section-title">API Keys</h3>
            <div class="space-y-4">
              <div class="p-4 bg-gray-100 dark:bg-gray-800 rounded-md">
                <div class="flex justify-between mb-2">
                  <p class="font-medium">API Key (ใช้งาน)</p>
                  <p class="text-sm text-gray-500 dark:text-gray-400">สร้างเมื่อ 15 มี.ค. 2025</p>
                </div>
                <div class="flex justify-between">
                  <div class="flex items-center">
                    <input type="password" value="api_key_12345678901234567890" class="form-control" disabled>
                    <button class="ml-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                      <i class="bi bi-eye"></i>
                    </button>
                    <button class="ml-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                      <i class="bi bi-clipboard"></i>
                    </button>
                  </div>
                  <button class="text-red-500 hover:text-red-700">เพิกถอน</button>
                </div>
              </div>
            </div>
            <div class="mt-4">
              <button class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-md">
                สร้าง API Key ใหม่
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Team Settings -->
      <div class="settings-card animate-fadeIn">
        <div class="settings-header">
          <div class="settings-icon icon-team">
            <i class="bi bi-people"></i>
          </div>
          <h2 class="settings-title">การจัดการทีม</h2>
        </div>
        <div class="settings-content">
          <div class="settings-section">
            <div class="flex justify-between items-center mb-4">
              <h3 class="settings-section-title mb-0">สมาชิกในทีม</h3>
              <button class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-md">
                <i class="bi bi-plus-lg mr-1"></i> เพิ่มสมาชิก
              </button>
            </div>
            <div class="user-list">
              <div class="user-item">
                <img src="https://ui-avatars.com/api/?name=reefinX&background=0D9488&color=fff" alt="User Avatar" class="user-avatar">
                <div class="user-info">
                  <p class="user-name">reefinX</p>
                  <p class="user-email">reefinx@example.com</p>
                </div>
                <span class="user-role role-admin">ผู้ดูแลระบบ</span>
                <button class="ml-4 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                  <i class="bi bi-three-dots-vertical"></i>
                </button>
              </div>
              <div class="user-item">
                <img src="https://ui-avatars.com/api/?name=มานี+สมใจ&background=4F46E5&color=fff" alt="User Avatar" class="user-avatar">
                <div class="user-info">
                  <p class="user-name">มานี สมใจ</p>
                  <p class="user-email">manee@example.com</p>
                </div>
                <span class="user-role role-manager">ผู้จัดการ</span>
                <button class="ml-4 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                  <i class="bi bi-three-dots-vertical"></i>
                </button>
              </div>
              <div class="user-item">
                <img src="https://ui-avatars.com/api/?name=สมชาย+ใจดี&background=B45309&color=fff" alt="User Avatar" class="user-avatar">
                <div class="user-info">
                  <p class="user-name">สมชาย ใจดี</p>
                  <p class="user-email">somchai@example.com</p>
                </div>
                <span class="user-role role-editor">นักเขียน</span>
                <button class="ml-4 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                  <i class="bi bi-three-dots-vertical"></i>
                </button>
              </div>
              <div class="user-item">
                <img src="https://ui-avatars.com/api/?name=วนิดา+สมศรี&background=DB2777&color=fff" alt="User Avatar" class="user-avatar">
                <div class="user-info">
                  <p class="user-name">วนิดา สมศรี</p>
                  <p class="user-email">wanida@example.com</p>
                </div>
                <span class="user-role role-editor">นักเขียน</span>
                <button class="ml-4 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                  <i class="bi bi-three-dots-vertical"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="settings-section">
            <h3 class="settings-section-title">สิทธิ์การใช้งาน</h3>
            <div class="space-y-4">
              <div class="p-4 bg-gray-100 dark:bg-gray-800 rounded-md">
                <p class="font-medium mb-2">ผู้ดูแลระบบ</p>
                <p class="text-sm text-gray-500 dark:text-gray-400">สามารถเข้าถึงและจัดการทุกฟีเจอร์ของระบบ รวมถึงการตั้งค่าและการจัดการสมาชิก</p>
              </div>
              <div class="p-4 bg-gray-100 dark:bg-gray-800 rounded-md">
                <p class="font-medium mb-2">ผู้จัดการ</p>
                <p class="text-sm text-gray-500 dark:text-gray-400">สามารถสร้างและจัดการแคมเปญ เนื้อหา และการวิเคราะห์ แต่ไม่สามารถเข้าถึงการตั้งค่าระบบ</p>
              </div>
              <div class="p-4 bg-gray-100 dark:bg-gray-800 rounded-md">
                <p class="font-medium mb-2">นักเขียน</p>
                <p class="text-sm text-gray-500 dark:text-gray-400">สามารถสร้างและแก้ไขเนื้อหา แต่ต้องได้รับการอนุมัติก่อนเผยแพร่</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- General Settings -->
      <div class="settings-card animate-fadeIn">
        <div class="settings-header">
          <div class="settings-icon icon-general">
            <i class="bi bi-sliders"></i>
          </div>
          <h2 class="settings-title">การตั้งค่าทั่วไป</h2>
        </div>
        <div class="settings-content">
          <div class="settings-section">
            <h3 class="settings-section-title">การตั้งค่าการแสดงผล</h3>
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium">ธีมสีมืด (Dark Mode)</p>
                  <p class="text-sm text-gray-500 dark:text-gray-400">เปลี่ยนรูปแบบการแสดงผลเป็นโทนสีมืด</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="darkModeToggle">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium">แสดงเมนูย่อ</p>
                  <p class="text-sm text-gray-500 dark:text-gray-400">แสดงเมนูด้านข้างแบบย่อเป็นค่าเริ่มต้น</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox">
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
          </div>
          <div class="settings-section">
            <h3 class="settings-section-title">การตั้งค่าข้อมูล</h3>
            <div class="space-y-4">
              <div class="form-group">
                <label for="dateFormat">รูปแบบวันที่</label>
                <select id="dateFormat" class="form-control">
                  <option value="DD/MM/YYYY">วัน/เดือน/ปี (31/12/2025)</option>
                  <option value="MM/DD/YYYY">เดือน/วัน/ปี (12/31/2025)</option>
                  <option value="YYYY-MM-DD">ปี-เดือน-วัน (2025-12-31)</option>
                  <option value="DD MMMM YYYY">วัน เดือน ปี (31 ธันวาคม 2025)</option>
                </select>
              </div>
              <div class="form-group">
                <label for="currency">สกุลเงิน</label>
                <select id="currency" class="form-control">
                  <option value="THB">บาท (฿)</option>
                  <option value="USD">ดอลลาร์สหรัฐ ($)</option>
                  <option value="EUR">ยูโร (€)</option>
                  <option value="JPY">เยน (¥)</option>
                </select>
              </div>
            </div>
          </div>
          <div class="settings-action">
            <button class="bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 py-2 px-4 rounded-md mr-3">
              ยกเลิก
            </button>
            <button class="bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-400 text-white py-2 px-4 rounded-md">
              บันทึก
            </button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    // Wait for the DOM to load
    // Show/Hide Loading Function
    function showLoading(show) {
      const loader = document.getElementById('loadingOverlay');
      if (show) {
        loader.style.display = 'flex';
        loader.classList.remove('animate__fadeOut');
        loader.classList.add('animate__fadeIn');

        // โหลดและเล่น Lottie animation
        if (!lottieAnimation) {
          console.log('🔄 Loading Lottie animation from /Loading/Loading.json');
          fetch('/Loading/Loading.json')
            .then(response => {
              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
              }
              return response.json();
            })
            .then(animationData => {
              lottieAnimation = lottie.loadAnimation({
                container: document.getElementById('lottieContainer'),
                renderer: 'svg',
                loop: true,
                autoplay: true,
                animationData: animationData
              });

              console.log('✅ Lottie animation loaded successfully');
            })
            .catch(error => {
              console.error('❌ Error loading Lottie animation:', error);
              // No fallback spinner - just show empty container
              document.getElementById('lottieContainer').innerHTML = '';
            });
        } else {
          lottieAnimation.play();
        }
      } else {
        if (lottieAnimation) {
          lottieAnimation.pause();
        }
        loader.classList.remove('animate__fadeIn');
        loader.classList.add('animate__fadeOut');
        setTimeout(() => { loader.style.display = 'none'; }, 600);
      }
    }

    document.addEventListener('DOMContentLoaded', async function() {
      // Load sidebar first
      try {
        const response = await fetch('/views/marketing/includes/sidebar.html');
        const sidebarHtml = await response.text();
        const sidebarContainer = document.getElementById('sidebar-container');
        if (sidebarContainer) {
          sidebarContainer.innerHTML = sidebarHtml;
          // Initialize sidebar functionality
          if (typeof initializeSidebar === 'function') {
            initializeSidebar();
          }
        }
      } catch (error) {
        console.error('Error loading sidebar:', error);
        // Fallback: show basic sidebar structure
        const sidebarContainer = document.getElementById('sidebar-container');
        if (sidebarContainer) {
          sidebarContainer.innerHTML = '<aside class="w-64 bg-white dark:bg-gray-800 sticky top-0 h-screen"><div class="p-4">Sidebar Loading Error</div></aside>';
        }
      }
      
      // Initialize Toggle Menu
      initToggleMenu();
      
      // Initialize Dark Mode
      initDarkMode();
      
      // Set up event listeners
      setupEventListeners();
      
      // Initialize user data
      initUserData();
      
      // Format and set date/time
      formatDateTime();
    });
    
    // Initialize sidebar toggle
    function initToggleMenu() {
      const btnToggleMenu = document.getElementById('btnToggleMenu');'
      const sidebar = document.getElementById('sidebar');'
      
      btnToggleMenu.addEventListener('click', function() {'
        if (sidebar.classList.contains('w-64')) {'
          sidebar.classList.remove('w-64');'
          sidebar.classList.add('w-0');'
          this.innerHTML = '<i class="bi bi-chevron-right"></i>';'
        } else {
          sidebar.classList.remove('w-0');'
          sidebar.classList.add('w-64');'
          this.innerHTML = '<i class="bi bi-chevron-left"></i>';'
        }
      });
    }
    
    // Initialize dark mode toggle
    function initDarkMode() {
      const btnToggleDark = document.getElementById('btnToggleDark');'
      const darkModeLabel = document.getElementById('darkModeLabel');'
      const darkModeToggle = document.getElementById('darkModeToggle');'
      
      // Check system preference
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {'
        document.documentElement.classList.add('dark');'
        darkModeLabel.textContent = 'Light Mode';'
        btnToggleDark.innerHTML = '<i class="bi bi-brightness-high text-xl text-yellow-500 dark:text-yellow-400"></i><span class="ml-3">Light Mode</span>';'
        if (darkModeToggle) darkModeToggle.checked = true;
      }
      
      btnToggleDark.addEventListener('click', function() {'
        toggleDarkMode();
      });
      
      if (darkModeToggle) {
        darkModeToggle.addEventListener('change', function() {'
          toggleDarkMode();
        });
      }
    }
    
    // Toggle dark mode function
    function toggleDarkMode() {
      const darkModeLabel = document.getElementById('darkModeLabel');'
      const btnToggleDark = document.getElementById('btnToggleDark');'
      const darkModeToggle = document.getElementById('darkModeToggle');'
      
      if (document.documentElement.classList.contains('dark')) {'
        document.documentElement.classList.remove('dark');'
        darkModeLabel.textContent = 'Dark Mode';'
        btnToggleDark.innerHTML = '<i class="bi bi-moon text-xl text-slate-600"></i><span class="ml-3">Dark Mode</span>';'
        if (darkModeToggle) darkModeToggle.checked = false;
      } else {
        document.documentElement.classList.add('dark');'
        darkModeLabel.textContent = 'Light Mode';'
        btnToggleDark.innerHTML = '<i class="bi bi-brightness-high text-xl text-yellow-500"></i><span class="ml-3">Light Mode</span>';'
        if (darkModeToggle) darkModeToggle.checked = true;
      }
    }
    
    // Initialize user data
    function initUserData() {
      document.getElementById('employeeName').textContent = 'reefinX';'
    }
    
    // Format and display current date and time
    function formatDateTime() {
      const dateTime = new Date("2025-05-10T08:14:43Z");
      
      // Format date for Thai locale
      const options = { 
        day: 'numeric', 
        month: 'short', 
        year: 'numeric', 
        hour: '2-digit', 
        minute: '2-digit', 
        second: '2-digit' 
      };
      
      let formattedDate = dateTime.toLocaleDateString('th-TH', options);
      
      // Set date on UI
      document.getElementById('currentDateTime').textContent = formattedDate;
    }
    
    // Set up event listeners
    function setupEventListeners() {
      // Logout button action
      document.getElementById('btnLogoutSidebar').addEventListener('click', function() {'
        if (confirm('คุณต้องการออกจากระบบใช่หรือไม่?')) {'
          window.location.href = '/login';'
        }
      });
      
      // Add any other event listeners here
    }
  </script>
</body>
</html>