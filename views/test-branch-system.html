<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ทดสอบระบบ Branch Navigation</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="pattani/js/branch-navigation.js"></script>
</head>
<body class="bg-gray-100 p-8">
  <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6">
    <h1 class="text-2xl font-bold mb-6">ทดสอบระบบ Branch Navigation</h1>
    
    <div class="mb-6 p-4 bg-blue-50 rounded">
      <h2 class="font-bold mb-2">ข้อมูล Branch ปัจจุบัน:</h2>
      <p>Branch Code: <span id="branchCode" class="font-mono bg-gray-200 px-2 py-1 rounded"></span></p>
      <p>Branch Name: <span id="branchName" class="font-mono bg-gray-200 px-2 py-1 rounded"></span></p>
      <p>URL Parameters: <span id="urlParams" class="font-mono bg-gray-200 px-2 py-1 rounded"></span></p>
    </div>
    
    <div class="mb-6">
      <h2 class="font-bold mb-2">ทดสอบการสร้าง URL:</h2>
      <div class="space-y-2">
        <div class="flex items-center gap-2">
          <button onclick="testUrl('frontstore_pattani')" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">'
            Test frontstore_pattani
          </button>
          <span id="result-frontstore" class="text-sm"></span>
        </div>
        <div class="flex items-center gap-2">
          <button onclick="testUrl('installment_Pattani')" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">'
            Test installment_Pattani
          </button>
          <span id="result-installment" class="text-sm"></span>
        </div>
        <div class="flex items-center gap-2">
          <button onclick="testUrl('Quotationn')" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">'
            Test Quotationn
          </button>
          <span id="result-quotation" class="text-sm"></span>
        </div>
      </div>
    </div>
    
    <div class="mb-6">
      <h2 class="font-bold mb-2">ทดสอบลิงก์:</h2>
      <div class="space-y-2">
        <a href="pattani/frontstore_pattani" class="text-blue-500 hover:underline">ไปหน้าขายสด</a><br>
        <a href="pattani/installment_Pattani" class="text-blue-500 hover:underline">ไปหน้าขายผ่อน</a><br>
        <a href="pattani_home" class="text-blue-500 hover:underline">กลับหน้าหลัก</a>
      </div>
    </div>
    
    <div class="mt-6 p-4 bg-yellow-50 rounded">
      <h3 class="font-bold mb-2">หมายเหตุ:</h3>
      <ul class="list-disc list-inside text-sm">
        <li>ระบบจะอ่าน branch code จาก URL parameter ?branch=xxx&name=yyy</li>
        <li>ถ้าไม่มี parameter จะใช้ค่าจาก localStorage</li>
        <li>ถ้าไม่มีทั้งสองอย่าง จะใช้ค่า default เป็น '00000'</li>'
        <li>ลิงก์ทั้งหมดจะถูกแปลงอัตโนมัติให้มี branch parameter</li>
      </ul>
    </div>
  </div>
  
  <script>
    // แสดงข้อมูล branch ปัจจุบัน
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('branchCode').textContent = BranchNavigation.getBranchCode();
      document.getElementById('branchName').textContent = BranchNavigation.getBranchName() || '(ไม่ระบุ)';
      document.getElementById('urlParams').textContent = window.location.search || '(ไม่มี)';
    });
    
    // ฟังก์ชันทดสอบการสร้าง URL
    function testUrl(path) {
      const newUrl = BranchNavigation.getBranchUrl(path);
      const resultId = 'result-' + path.replace(/[^a-z]/gi, '').toLowerCase();
      document.getElementById(resultId).textContent = newUrl;
    }
  </script>
</body>
</html> 