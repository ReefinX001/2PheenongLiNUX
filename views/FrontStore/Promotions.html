<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô / ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£ | 2 ‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á ‡πÇ‡∏°‡∏ö‡∏≤‡∏¢</title>
  <link rel="stylesheet" href="/views/FrontStore/styles.css?v=19">
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'sf': ['SF Pro Display', 'system-ui', 'sans-serif'],
          },
          colors: {
            'gray-light': '#f8f9fa',
            'gray-lighter': '#e9ecef',
            'gray-medium': '#6c757d',
            'gray-dark': '#495057',
            'gray-darker': '#343a40'
          }
        }
      }
    };
  </script>
  <style>
    body { font-family: 'SF Pro Display', system-ui, sans-serif; }
  </style>
</head>
<body class="bg-gray-light font-sf">
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <div class="nav-links">
                <a href="Promotions" class="nav-link">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</a>
                <a href="Product" class="nav-link">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
                <div class="nav-brand">
                    <a href="/" class="brand-link" title="‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å">
                        <img src="/views/FrontStore/Logo2png.png" alt="2‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á ‡πÇ‡∏°‡∏ö‡∏≤‡∏¢" class="brand-logo">
                    </a>
                </div>
                <a href="JoinUs" class="nav-link">‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a>
                <a href="Contact" class="nav-link">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
            </div>
        </div>
    </nav>

  <!-- Main Content -->
  <main class="container my-5">
    <header class="text-center mb-5">
      <h1 class="display-5 fw-bold text-gray-800 mb-3">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô / ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</h1>
      <p class="lead text-gray-600">‡∏î‡∏µ‡∏•‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÉ‡∏´‡∏°‡πà</p>
    </header>

    <!-- Search Box -->
    <div class="row justify-content-center mb-4">
      <div class="col-lg-6">
        <div class="input-group">
          <input id="searchBox" type="search" class="form-control rounded-pill border-0 shadow-sm px-4" 
                 placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô..." style="height: 45px;" />
          <span class="input-group-text bg-transparent border-0 position-absolute end-0 top-0 pe-4" 
                style="height: 45px; z-index: 10;">üîç</span>
        </div>
      </div>
    </div>

    <!-- Filter Chips -->
    <div id="chips" class="d-flex gap-2 justify-content-center flex-wrap mb-5"></div>

    <!-- Promotions Grid -->
    <section id="grid" class="row g-4"></section>
    <div id="emptyState" class="alert alert-info text-center" style="display:none">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</div>
  </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-main">
                <div class="footer-section">
                    <div class="footer-brand">
                        <img src="/views/FrontStore/Logo2png.png" alt="2‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á ‡πÇ‡∏°‡∏ö‡∏≤‡∏¢" class="footer-logo">
                        <h2 class="footer-title">2 ‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á ‡πÇ‡∏°‡∏ö‡∏≤‡∏¢</h2>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-contact-title">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</h3>
                    <div class="footer-contact">
                        <p class="company-name">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó 2 ‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á ‡πÇ‡∏°‡∏ö‡∏≤‡∏¢ ‡∏à‡∏≥‡∏Å‡∏±‡∏î</p>
                        <p class="company-address">148/91 ‡∏ï‡∏≥‡∏ö‡∏• ‡∏£‡∏π‡∏™‡∏∞‡∏°‡∏¥‡πÅ‡∏• ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ 94000</p>
                        <p class="company-phone">üìû 092 427 0769</p>
                        <p class="company-email">‚úâÔ∏è support@2pheenong.com</p>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3 class="footer-menu-title">2 ‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á ‡πÇ‡∏°‡∏ö‡∏≤‡∏¢</h3>
                    <div class="footer-menu">
                        <a href="/Promotions" class="footer-link">‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</a>
                        <a href="/Contact" class="footer-link">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
                        <a href="/terms" class="footer-link">‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a>
                        <a href="/privacy" class="footer-link">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
                        <a href="#" onclick="if(cookieConsent) cookieConsent.showSettings(); return false;" class="footer-link">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∏‡∏Å‡∏Å‡∏µ‡πâ</a>
                    </div>
                </div>
            </div>
            
            <!-- Partner Logos Section -->
            <div class="footer-partners">
                <h3 class="partners-title">‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</h3>
                <div class="partner-logos">
                    <img src="/views/FrontStore/dbd_logo-20140312-175003.png" alt="DBD" class="partner-logo">
                    <img src="/views/FrontStore/ktc_logo.png" alt="KTC" class="partner-logo">
                    <img src="/views/FrontStore/images.png" alt="Partner" class="partner-logo">
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 2 ‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á ‡πÇ‡∏°‡∏ö‡∏≤‡∏¢. ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£</p>
            </div>
        </div>
    </footer>

  <script>
    let allPromotions = [];
    let currentType = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';

    async function fetchJSON(url){
      const res = await fetch(url);
      try { return await res.json(); } catch { return null; }
    }

    function renderChips(types){
      const chips = document.getElementById('chips');
      chips.innerHTML = '';
      const all = document.createElement('button');
      all.className = 'btn btn-primary btn-sm rounded-pill px-3 me-2 mb-2 fw-medium active-chip';
      all.textContent = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
      all.onclick = ()=>{ currentType='‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'; filterAndRender(); setActive(all); };
      chips.appendChild(all);
      types.forEach(t => {
        const b = document.createElement('button');
        b.className = 'btn btn-outline-secondary btn-sm rounded-pill px-3 me-2 mb-2 fw-medium';
        b.textContent = t;
        b.onclick = ()=>{ currentType=t; filterAndRender(); setActive(b); };
        chips.appendChild(b);
      });
      function setActive(btn){
        Array.from(chips.children).forEach(c=> {
          c.className = 'btn btn-outline-secondary btn-sm rounded-pill px-3 me-2 mb-2 fw-medium';
        });
        btn.className = 'btn btn-primary btn-sm rounded-pill px-3 me-2 mb-2 fw-medium active-chip';
      }
    }

    function cardHTML(p){
      const priceHTML = p.price ? `<p class="h6 fw-bold text-primary mb-2">${p.price}</p>` : '';
      const subtitle = p.subtitle ? `<p class="card-text text-gray-600 mb-2">${p.subtitle}</p>` : '';
      const img = p.thumbnailImage || p.image;
    
      return `
        <div class="col-lg-4 col-md-6">
          <div class="card border-0 shadow-sm h-100 hover:shadow-lg transition-all cursor-pointer" 
               style="border-radius: 20px;" onclick="openLink('${p.link || ''}')">
            ${img ? `
              <img src="${img}" alt="${p.title}" class="card-img-top" loading="lazy" 
                   style="height: 200px; object-fit: cover; border-radius: 20px 20px 0 0;" 
                   onerror="this.style.display='none'" />
            ` : ''}
            <div class="card-body p-4">
              ${p.promotionType ? `<span class="badge bg-primary bg-opacity-10 text-primary px-3 py-2 rounded-pill fw-normal mb-3">${p.promotionType}</span>` : ''}
              <h5 class="card-title fw-bold text-gray-800 mb-3">${p.title}</h5>
              ${subtitle}
              ${priceHTML}
            </div>
          </div>
        </div>`;
    }

    function filterAndRender(){
      const q = document.getElementById('searchBox').value.toLowerCase();
      let list = allPromotions.filter(p => (!q || (p.title||'').toLowerCase().includes(q) || (p.subtitle||'').toLowerCase().includes(q)));
      if (currentType !== '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î') list = list.filter(p => (p.promotionType||'‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ') === currentType);
      const grid = document.getElementById('grid');
      const empty = document.getElementById('emptyState');
      if (!list.length){ empty.style.display = 'block'; grid.innerHTML=''; return; }
      empty.style.display = 'none';
      grid.innerHTML = list.map(cardHTML).join('');
    }

    function openLink(link){
      if (!link) return;
      if (link.startsWith('http')) window.open(link, '_blank');
      else location.href = link;
    }

    (async function init(){
      const resp = await fetchJSON('/api/frontstore/promotions?isActive=true&limit=100');
      const data = resp?.data || [];
      allPromotions = data;
      const types = Array.from(new Set(allPromotions.map(p => p.promotionType || '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ')));
      renderChips(types);
      filterAndRender();
      document.getElementById('searchBox').addEventListener('input', filterAndRender);
    })();
  </script>
  <script src="/views/FrontStore/cookieConsent.js"></script>
</body>
</html>


