<!DOCTYPE html>
<!-- 
ประวัติใบเสร็จ - History Receipt Page
พัฒนาโดย: ทีมพัฒนาซอฟต์แวร์
อัปเดตล่าสุด: เดือนธันวาคม 2024
-->
<html lang="th" class="scroll-smooth" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <title>ประวัติใบเสร็จ - Tailscale Integrated</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png" />
    <link rel="shortcut icon" href="/favicon/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-chrome-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/favicon/android-chrome-512x512.png" />

    <script src="../js/activity-tracker.js"></script>
    <!-- Tailwind CSS & DaisyUI -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Prompt', 'sans-serif'],
            },
          },
        },
        daisyui: {
          themes: ['light', 'dark', 'corporate'],
        },
      };
    </script>
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@2.51.5/dist/full.css"
      rel="stylesheet"
      type="text/css"
    />

    <!-- Socket.IO, Bootstrap Icons, Google Fonts -->
    <script src="/socket.io/socket.io.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    <!-- Google Fonts: Prompt -->
    <link
      href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Notification System CSS -->
    <link rel="stylesheet" href="/css/notification-system.css" />
  
  <!-- Sidebar CSS -->
  <link rel="stylesheet" href="/views/pattani/sidebar/sidebar.css" />

    <!-- Branch Navigation and Sidebar -->
    <script src="/js/branch-navigation.js"></script>
    <!-- Notification System JavaScript -->
    <script src="/js/notification-system.js"></script>
    <script src="/views/pattani/sidebar/sidebar.js"></script>
  
    <style>
      :root {
        --primary-color: #0d6efd;
        --primary-hover: #138af2;
        --bg-color: #ffffff;
        --text-color: #333333;
        --border-color: #e0e0e0;
        --transition-speed: 0.3s;
      }
      .dark {
        --primary-color: #ff8800;
        --primary-hover: #ffa733;
        --bg-color: #2a2a2a;
        --text-color: #ffffff;
        --border-color: #555555;
      }
      .bubble h6 {
        font-size: 0.875rem;
        font-weight: 600;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        margin: 0;
      }
      aside.collapsed {
        width: 5rem;
      }
      aside.collapsed .ml-3 {
        display: none;
      }
      .bubble {
        width: 110px;
        height: 130px;
        border-radius: 0.75rem;
        color: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: transform var(--transition-speed);
        background-color: var(--primary-color);
        position: relative;
      }
      .bubble:hover {
        transform: scale(1.05);
        background-color: var(--primary-hover);
      }
      .flip-card {
        perspective: 1000px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: 0.75rem;
        width: 200px;
        height: 420px;
      }
      .flip-card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        transition: transform 0.4s ease-in-out;
        transform-style: preserve-3d;
      }
      .flip-card.flipped .flip-card-inner {
        transform: rotateY(180deg);
      }
      .flip-card-front,
      .flip-card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border: 1px solid var(--border-color);
        border-radius: 0.75rem;
        padding: 0.5rem;
      }
      .flip-card-back {
        transform: rotateY(180deg);
        background-color: var(--bg-color);
      }
      .product-price-big {
        font-size: 1rem;
        font-weight: 600;
        color: var(--primary-color);
      }
      .product-img {
        width: 100%;
        height: auto;
        object-fit: cover;
        border-radius: 0.25rem;
      }
      aside {
        position: sticky;
        top: 0;
        height: 100vh;
        overflow-y: auto;
        background-color: #ffffff;
      }
      h6 {
        white-space: normal;
        word-wrap: break-word;
        overflow: visible;
      }
      /* Main content with sidebar */
      #mainContent {
        margin-left: 14rem;
        transition: margin-left 0.3s ease-in-out;
      }
      #sidebar ul li a {
        color: #333333 !important;
      }
      
      /* Loading overlay */
            [data-theme="dark"]       .loading-spinner {
        width: 3rem;
        height: 3rem;
        border: 0.25rem solid #e0e0e0;
        border-top-color: #0d6efd;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }

      @keyframes spin {
        to { transform: rotate(360deg); }
      }
    </style>
  
  <!-- LoadingSystem v2.0.0 - Inline Version -->
  <style>
    /* LoadingSystem CSS - Inline Version */
    .loading-system-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 10000;
    }

    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      z-index: 10001;
      pointer-events: auto;
    }

    .loading-overlay.loading-visible {
      opacity: 1;
      visibility: visible;
    }

    .loading-overlay.loading-hiding {
      opacity: 0;
      visibility: hidden;
    }

    .loading-content {
      background: #ffffff;
      padding: 2rem;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      min-width: 250px;
      max-width: 90vw;
    }

    .loading-spinner {
      width: 3rem;
      height: 3rem;
      border: 0.25rem solid #e0e0e0;
      border-top-color: #0d6efd;
      border-radius: 50%;
      animation: loading-spin 0.8s linear infinite;
      margin: 0 auto 1rem;
    }

    .loading-message {
      color: #333333;
      font-size: 1rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
    }

    .loading-progress {
      width: 100%;
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 1rem;
    }

    .loading-progress-fill {
      height: 100%;
      background: #0d6efd;
      width: 0%;
      transition: width 0.3s ease;
      border-radius: 4px;
    }

    /* Theme Variants */
    .loading-success .loading-spinner { border-top-color: #10b981; }
    .loading-success .loading-progress-fill { background: #10b981; }

    .loading-warning .loading-spinner { border-top-color: #f59e0b; }
    .loading-warning .loading-progress-fill { background: #f59e0b; }

    .loading-error .loading-spinner { border-top-color: #ef4444; }
    .loading-error .loading-progress-fill { background: #ef4444; }

    @keyframes loading-spin {
      to { transform: rotate(360deg); }
    }

    /* Dark mode support */
    [data-theme="dark"] .loading-content {
      background: #2a2a2a;
      color: #ffffff;
    }

    [data-theme="dark"] .loading-message {
      color: #ffffff;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .loading-content {
        padding: 1.5rem;
        margin: 1rem;
      }
    }
  </style>

  <script>
    // LoadingSystem v2.0.0 - Inline Version
    (function(window) {
      'use strict';

      console.log('ðŸš€ LoadingSystem v2.0.0 (Inline) initializing...');

      let activeLoaders = new Map();
      let loaderCounter = 0;
      let defaultContainer = null;

      function createDefaultContainer() {
        if (defaultContainer && document.body.contains(defaultContainer)) {
          return defaultContainer;
        }
        defaultContainer = document.createElement('div');
        defaultContainer.id = 'loading-system-container';
        defaultContainer.className = 'loading-system-container';
        document.body.appendChild(defaultContainer);
        return defaultContainer;
      }

      function generateLoaderId() {
        return `loader-${Date.now()}-${++loaderCounter}`;
      }

      function createLoadingOverlay(options = {}) {
        const overlay = document.createElement('div');
        overlay.className = 'loading-overlay';
    
        const content = document.createElement('div');
        content.className = 'loading-content';
    
        const spinner = document.createElement('div');
        spinner.className = 'loading-spinner';
    
        const message = document.createElement('div');
        message.className = 'loading-message';
        message.textContent = options.message || 'กำลังโหลด...';
    
        let progressBar = null;
        if (options.showProgress) {
          progressBar = document.createElement('div');
          progressBar.className = 'loading-progress';
    
          const progressFill = document.createElement('div');
          progressFill.className = 'loading-progress-fill';
          progressBar.appendChild(progressFill);
        }
    
        content.appendChild(spinner);
        content.appendChild(message);
        if (progressBar) {
          content.appendChild(progressBar);
        }
        overlay.appendChild(content);
    
        return { overlay, progressBar };
      }

      function updateProgress(loaderId, progress) {
        const loaderData = activeLoaders.get(loaderId);
        if (loaderData && loaderData.progressBar) {
          const fill = loaderData.progressBar.querySelector('.loading-progress-fill');
          if (fill) {
            fill.style.width = `${Math.min(100, Math.max(0, progress))}%`;
          }
        }
      }

      function startAutoProgress(loaderId) {
        const loaderData = activeLoaders.get(loaderId);
        if (!loaderData || !loaderData.autoProgress) return;

        let progress = 0;
        const interval = setInterval(() => {
          progress += Math.random() * 15;
          if (progress >= 95) {
            progress = 95;
            clearInterval(interval);
          }
          updateProgress(loaderId, progress);
        }, 200);

        loaderData.progressInterval = interval;
      }

      const LoadingSystem = {
        show: function(options = {}) {
          try {
            const loaderId = generateLoaderId();
            const container = createDefaultContainer();
    
            const { overlay, progressBar } = createLoadingOverlay(options);
            overlay.setAttribute('data-loader-id', loaderId);
    
            if (options.type && options.type !== 'default') {
              overlay.classList.add(`loading-${options.type}`);
            }
    
            container.appendChild(overlay);
    
            const loaderData = {
              overlay: overlay,
              progressBar: progressBar,
              options: options,
              createdAt: Date.now(),
              autoProgress: options.autoProgress,
              progressInterval: null,
              timeout: null
            };
    
            activeLoaders.set(loaderId, loaderData);
    
            if (options.autoProgress && progressBar) {
              startAutoProgress(loaderId);
            }
    
            if (options.timeout && options.timeout > 0) {
              loaderData.timeout = setTimeout(() => {
                this.hide(loaderId);
              }, options.timeout);
            }
    
            requestAnimationFrame(() => {
              overlay.classList.add('loading-visible');
            });
    
            console.log(`âœ… LoadingSystem.show() - ID: ${loaderId}`);
            return loaderId;
    
          } catch (error) {
            console.error('âŒ LoadingSystem.show() error:', error);
            return null;
          }
        },

        hide: function(loaderId) {
          try {
            if (!loaderId) return;
    
            const loaderData = activeLoaders.get(loaderId);
            if (!loaderData) return;
    
            if (loaderData.progressBar) {
              updateProgress(loaderId, 100);
            }
    
            if (loaderData.progressInterval) {
              clearInterval(loaderData.progressInterval);
            }
    
            if (loaderData.timeout) {
              clearTimeout(loaderData.timeout);
            }
    
            loaderData.overlay.classList.remove('loading-visible');
            loaderData.overlay.classList.add('loading-hiding');
    
            setTimeout(() => {
              if (loaderData.overlay && loaderData.overlay.parentNode) {
                loaderData.overlay.parentNode.removeChild(loaderData.overlay);
              }
              activeLoaders.delete(loaderId);
            }, 300);
    
            console.log(`âœ… LoadingSystem.hide() - ID: ${loaderId}`);
    
          } catch (error) {
            console.error('âŒ LoadingSystem.hide() error:', error);
          }
        },

        hideAll: function() {
          try {
            const loaderIds = Array.from(activeLoaders.keys());
            loaderIds.forEach(loaderId => this.hide(loaderId));
            console.log(`âœ… LoadingSystem.hideAll() - ซ่อน ${loaderIds.length} loaders`);
          } catch (error) {
            console.error('âŒ LoadingSystem.hideAll() error:', error);
          }
        },

        updateProgress: function(loaderId, progress) {
          updateProgress(loaderId, progress);
        },

        completeProgress: function(loaderId = null) {
          if (loaderId) {
            updateProgress(loaderId, 100);
            setTimeout(() => this.hide(loaderId), 500);
          } else {
            activeLoaders.forEach((loaderData, id) => {
              if (loaderData.progressBar) {
                updateProgress(id, 100);
                setTimeout(() => this.hide(id), 500);
              }
            });
          }
        },

        updateMessage: function(loaderId, message) {
          try {
            const loaderData = activeLoaders.get(loaderId);
            if (loaderData) {
              const messageEl = loaderData.overlay.querySelector('.loading-message');
              if (messageEl) {
                messageEl.textContent = message;
              }
            }
          } catch (error) {
            console.error('âŒ LoadingSystem.updateMessage() error:', error);
          }
        },

        isActive: function(loaderId) {
          return activeLoaders.has(loaderId);
        },

        getActiveCount: function() {
          return activeLoaders.size;
        },

        cleanup: function() {
          this.hideAll();
          if (defaultContainer && document.body.contains(defaultContainer)) {
            document.body.removeChild(defaultContainer);
            defaultContainer = null;
          }
          activeLoaders.clear();
          loaderCounter = 0;
          console.log('ðŸ§¹ LoadingSystem.cleanup() - ล้างข้อมูลทั้งหมดแล้ว');
        },

        debug: function() {
          return {
            activeLoaders: activeLoaders.size,
            loaderIds: Array.from(activeLoaders.keys()),
            containerExists: !!defaultContainer,
            version: '2.0.0-inline'
          };
        }
      };

      // Export LoadingSystem to global scope
      window.LoadingSystem = LoadingSystem;

      // Auto cleanup เมื่อออกจากหน้า
      window.addEventListener('beforeunload', () => {
        LoadingSystem.cleanup();
      });

      console.log('âœ… LoadingSystem v2.0.0 (Inline) initialized successfully');

    })(window);
  </script>

  <!-- Animate.css for animations -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <!-- Lottie.js for loading animations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>

  <!-- Loading Overlay Styles -->
  <style>
    .history-backup-loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 999999;
      opacity: 1;
      visibility: visible;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    .history-backup-loading-overlay.animate__fadeOut {
      opacity: 0;
      visibility: hidden;
    }

    .history-backup-loading-content {
      text-align: center;
      color: #374151;
    }

    .history-backup-lottie-container {
      width: 120px;
      height: 120px;
      margin: 0 auto 1rem;
    }

    .history-backup-loading-text {
      font-size: 1.125rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .history-backup-loading-subtext {
      font-size: 0.875rem;
      opacity: 0.7;
    }

    @media (prefers-color-scheme: dark) {
      .history-backup-loading-overlay {
        background: rgba(17, 24, 39, 0.95);
      }

      .history-backup-loading-content {
        color: #f3f4f6;
      }
    }
  </style>
</head>

  <body>
  <!-- Loading Overlay -->
  <div id="historyBackupLoadingOverlay" class="history-backup-loading-overlay">
    <div class="history-backup-loading-content">
      <div id="historyBackupLottieContainer" class="history-backup-lottie-container"></div>
      <div class="history-backup-loading-text">กำลังโหลด...</div>
      <div class="history-backup-loading-subtext">กรุณารอสักครู่</div>
    </div>
  </div>
        </div>
    
    <!-- Sidebar Container -->
    <div id="sidebarContainer"></div>

    <div class="flex min-h-screen">
      <!-- Main Content -->
      <div id="mainContent" class="flex-1 flex flex-col">
        <header class="p-4 bg-white dark:bg-gray-800 flex justify-between items-center">
          <div>
            <h1 class="text-xl font-bold" id="pageTitle">ประวัติใบเสร็จ</h1>
            <p class="text-sm text-gray-600 dark:text-gray-300" id="branchInfo">กำลังโหลดสาขา...</p>
            <p class="text-xs text-green-600 dark:text-green-400">
              <i class="bi bi-shield-check"></i> Tailscale Printer Integration
            </p>
          </div>
          
          <!-- Printer Settings & Notifications -->
          <div class="flex items-center gap-3">
            <!-- Printer Settings -->
            <button onclick="setupPrinterServer()" class="btn btn-sm btn-outline gap-2">
              <i class="bi bi-printer"></i>
              <span class="text-sm">ตั้งค่าเครื่องพิมพ์</span>
            </button>
            
            <!-- Test Printer Connection -->
            <button onclick="testPrinterConnection()" class="btn btn-sm btn-secondary gap-2">
              <i class="bi bi-wifi"></i>
              <span class="text-sm">ทดสอบเครื่องพิมพ์</span>
            </button>
            
            <!-- Test Direct Printer Connection -->
            <button onclick="testDirectPrinterConnection()" class="btn btn-sm btn-accent gap-2">
              <i class="bi bi-lightning"></i>
              <span class="text-sm">ทดสอบโดยตรง</span>
            </button>
            
            <!-- Notifications -->
            <div class="relative" id="notificationWrapper">
              <button id="notificationButton" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition text-gray-600 dark:text-gray-300">
                <i class="bi bi-bell-fill"></i>
              </button>
            <span id="notificationDot" class="absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-red-500 w-2.5 h-2.5 rounded-full hidden"></span>
            <span id="notificationBadge" class="absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-red-500 text-white text-xs rounded-full px-1 min-w-[1rem] text-center hidden">0</span>
            
            <!-- Notification Dropdown -->
            <div id="notificationDropdown" class="absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 hidden z-30">
              <div class="p-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                <h3 class="font-medium">การแจ้งเตือน</h3>
                <button class="text-sm text-primary-600 dark:text-primary-400">อ่านทั้งหมดแล้ว</button>
              </div>
              <div class="max-h-96 overflow-y-auto">
                <!-- Empty state -->
                <div class="p-4 text-center text-gray-500 dark:text-gray-400">
                  <i class="bi bi-bell-slash text-2xl mb-2"></i>
                  <p>ไม่มีการแจ้งเตือนใหม่</p>
                </div>
                <!-- Notification items would go here -->
              </div>
              <div class="p-2 border-t border-gray-200 dark:border-gray-700 text-center">
                <a href="#" class="text-sm text-primary-600 dark:text-primary-400">ดูการแจ้งเตือนทั้งหมดแล้ว</a>
              </div>
            </div>
            </div>
          </div>
        </header>

        <!-- Filter Form -->
        <div class="bg-white dark:bg-gray-800 p-4 rounded-lg mb-4 mx-4">
          <div class="flex flex-wrap items-center gap-3 mb-4">
            <div class="flex items-center gap-2">
              <label class="font-semibold">วันที่เริ่ม:</label>
              <input type="date" id="startDate" class="input input-bordered max-w-xs" />
            </div>
            <div class="flex items-center gap-2">
              <label class="font-semibold">ถึงวันที่:</label>
              <input type="date" id="endDate" class="input input-bordered max-w-xs" />
            </div>
            <div class="flex items-center gap-2">
              <label class="font-semibold">ชื่อลูกค้า:</label>
              <input type="text" id="customerSearch" class="input input-bordered max-w-xs" placeholder="ชื่อลูกค้า..." />
            </div>
            <button id="btnFilter" class="btn btn-primary">
              <i class="bi bi-search mr-1"></i> ค้นหา
            </button>
          </div>
        </div>

        <!-- History Table -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow mb-4 mx-4">
          <div class="overflow-x-auto">
            <table class="table table-zebra w-full">
              <thead>
                <tr>
                  <th class="px-4 py-3">เลขที่ใบเสร็จ</th>
                  <th class="px-4 py-3">วันที่/เวลา</th>
                  <th class="px-4 py-3">ชื่อลูกค้า</th>
                  <th class="px-4 py-3">รวมเงิน</th>
                  <th class="px-4 py-3">ชื่อพนักงาน</th>
                  <th class="px-4 py-3 text-center">การดำเนินการ</th>
                </tr>
              </thead>
              <tbody id="historyTableBody">
                <tr>
                  <td colspan="6" class="text-center text-gray-500 py-8">
                    <i class="bi bi-inbox text-3xl"></i>
                    <p class="mt-2">ไม่พบรายการที่ตรงกับเงื่อนไขการค้นหา</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <!-- Pagination Controls -->
          <div class="flex justify-between items-center p-4 border-t">
            <div class="text-sm text-gray-500">
              <span id="currentRange">0-0</span> รายการ <span id="totalItems">0</span> รายการ
            </div>
            <div class="flex gap-2" id="paginationControls">
              <button class="btn btn-sm btn-outline" id="prevPage" disabled>
                <i class="bi bi-chevron-left"></i> ก่อนหน้า
              </button>
              <button class="btn btn-sm btn-outline" id="nextPage" disabled>
                <i class="bi bi-chevron-right"></i> ถัดไป
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Receipt Detail Modal -->
    <div id="receiptModal" class="modal">
      <div class="modal-box max-w-3xl">
        <h3 class="font-bold text-lg mb-4">รายละเอียดใบเสร็จ <span id="modalInvoiceNo"></span></h3>
        <!-- ... modal content ... -->
        <div class="modal-action">
          <button id="btnPrintReceipt" class="btn btn-info">
            <i class="bi bi-printer mr-1"></i> พิมพ์ใบเสร็จอีกครั้ง
          </button>
          <button id="btnCloseModal" class="btn">ปิดใบเสร็จอีกครั้ง
        </div>
      </div>
    </div>

    <script>
      // Function to show/hide loading overlay
            // Get branch code from URL parameter
      const urlParams = new URLSearchParams(window.location.search);
      let BRANCH_CODE = urlParams.get('branch') || localStorage.getItem('activeBranch');

      if (!BRANCH_CODE) {
        console.warn("Branch code not specified, defaulting to '00000' (สำนักงานใหญ่)");
        BRANCH_CODE = '00000'; // อัปเดตให้ตรงกับฐานข้อมูล
      }
      window.currentBranchCode = BRANCH_CODE;
      console.log(`[HistoryReceipt] Using branch code: ${BRANCH_CODE}`);

      let globalOutData = [];
      let filteredData = [];
      let currentPage = 1;
      const pageSize = 10;

      // Helper: format date/time
      function formatDateTime(dateStr) {
        if (!dateStr) return "N/A";
        const dt = new Date(dateStr);
        const d = String(dt.getDate()).padStart(2, "0");
        const m = String(dt.getMonth() + 1).padStart(2, "0");
        const y = dt.getFullYear();
        const hh = String(dt.getHours()).padStart(2, "0");
        const mi = String(dt.getMinutes()).padStart(2, "0");
        return `${d}/${m}/${y} ${hh}:${mi}`;
      }

      // Fetch history data
      async function fetchOutHistoryData() {
        const loaderId = LoadingSystem.show({
          message: 'กำลังโหลดประวัติใบเสร็จ...',
          showProgress: true,
          autoProgress: true
        });
        
        try {
          LoadingSystem.updateMessage(loaderId, 'เชื่อมต่อกับเซิร์ฟเวอร์...');
          LoadingSystem.updateProgress(loaderId, 25);
          
          const token = localStorage.getItem('authToken');
          console.log('🔍 Trying to fetch receipt data for branch:', BRANCH_CODE);
          
          // ลองใช้ API endpoints ต่างๆ ตามลำดับ
          const possibleEndpoints = [
            `/api/receipts?branch_code=${BRANCH_CODE}`,
            `/api/pos-receipts?branch_code=${BRANCH_CODE}`,
            `/api/sales-history?branch_code=${BRANCH_CODE}`,
            `/api/transaction-history?branch_code=${BRANCH_CODE}`,
            `/api/branch-sales?branch_code=${BRANCH_CODE}`
          ];
          
          let res = null;
          let workingEndpoint = null;
          
          for (const endpoint of possibleEndpoints) {
            try {
              console.log('🔍 Trying endpoint:', endpoint);
              res = await fetch(endpoint, {
                headers: { 'Authorization': 'Bearer ' + token }
              });
              
              if (res.ok) {
                const testJs = await res.json();
                if (testJs.success && testJs.data) {
                  workingEndpoint = endpoint;
                  console.log('✅ Working endpoint found:', endpoint);
                  break;
                }
              }
            } catch (e) {
              console.log('❌ Endpoint failed:', endpoint, e.message);
              continue;
            }
          }
          
          if (!workingEndpoint) {
            console.log('❌ No working endpoint found, using fallback...');
            res = await fetch("/api/branch-stock-history", {
              headers: { 'Authorization': 'Bearer ' + token }
            });
            workingEndpoint = "/api/branch-stock-history";
          }
          
          LoadingSystem.updateMessage(loaderId, 'กำลังประมวลผลข้อมูล...');
          LoadingSystem.updateProgress(loaderId, 75);
          
          const js = await res.json();
          if (!res.ok || !js.success) {
            console.log('API Response:', js);
            console.log('Used endpoint:', workingEndpoint);
            LoadingSystem.updateMessage(loaderId, 'เกิดข้อผิดพลาดในการโหลดข้อมูล!');
            setTimeout(() => LoadingSystem.hide(loaderId), 1000);
            return [];
          }
          
          console.log('📊 Raw API data:', js.data);
          console.log('📊 Data length:', js.data?.length || 0);
          if (js.data && js.data.length > 0) {
            console.log('📊 Sample record:', js.data[0]);
            console.log('📊 Available fields:', Object.keys(js.data[0]));
          }
          
          LoadingSystem.updateMessage(loaderId, 'กรองข้อมูลสาขา...');
          LoadingSystem.updateProgress(loaderId, 90);
          
          // กรองข้อมูลตาม endpoint ที่ใช้
          let filteredData = [];
          
          if (workingEndpoint.includes('branch-stock-history')) {
            // กรณีใช้ stock history API
            console.log('🔄 Filtering stock history data...');
            filteredData = js.data.filter(item => 
              item.change_type === "OUT" && 
              item.reason === "ขาย POS" &&
              item.branch_code === BRANCH_CODE
            );
          } else {
            // กรณีใช้ receipt/sales API
            console.log('🔄 Filtering receipt/sales data...');
            filteredData = js.data.filter(item => {
              // กรองเฉพาะสาขาที่ต้องการ
              const matchesBranch = item.branch_code === BRANCH_CODE || 
                                   (item.branch && item.branch.branch_code === BRANCH_CODE);
              
              // ถ้ามี field type หรือ status ให้กรองเฉพาะรายการที่เป็น receipt/sale
              const isReceipt = !item.type || 
                               item.type === 'receipt' || 
                               item.type === 'sale' ||
                               !item.status ||
                               item.status === 'completed' ||
                               item.status === 'paid';
              
              return matchesBranch && isReceipt;
            });
          }
          
          console.log('🎯 Filtered data:', filteredData);
          console.log('🎯 Filtered count:', filteredData.length);
          
          // แสดงตัวอย่างข้อมูลที่กรองแล้ว
          if (filteredData.length > 0) {
            console.log('🎯 Sample filtered record:', filteredData[0]);
          } else {
            console.log('⚠️ No data found after filtering!');
            console.log('⚠️ Check branch code and API data structure');
          }
          LoadingSystem.completeProgress(loaderId);
          return filteredData;
          
        } catch (err) {
          console.error('Error fetching receipt history:', err);
          LoadingSystem.updateMessage(loaderId, 'เกิดข้อผิดพลาดในการโหลดข้อมูล!');
          setTimeout(() => LoadingSystem.hide(loaderId), 2000);
          return [];
        }
      }

      // Filter by date range
      function filterByDateRange(data, startStr, endStr) {
        const start = startStr ? new Date(startStr) : null;
        const end = endStr ? new Date(endStr) : null;
        if (!start && !end) return data;
        return data.filter(item => {
          const dt = new Date(item.performed_at);
          if (start && dt < start) return false;
          if (end) { 
            end.setHours(23,59,59,999); 
            if (dt > end) return false; 
          }
          return true;
        });
      }

      // Paginate
      function paginate(data, page) {
        const i = (page - 1) * pageSize;
        return data.slice(i, i + pageSize);
      }

      // Render table
      function renderHistoryTable(data, page) {
        const tbody = document.getElementById("historyTableBody");
        tbody.innerHTML = "";
        
        if (data.length === 0) {
          tbody.innerHTML = `
            <tr>
              <td colspan="6" class="text-center text-gray-500 py-8">
                <i class="bi bi-inbox text-3xl"></i>
                <p class="mt-2">ไม่พบรายการที่ตรงกับเงื่อนไขการค้นหา</p>
              </td>
            </tr>`;
          return;
        }
        
        const pageData = paginate(data, page);
        pageData.forEach(rec => {
          const tr = document.createElement("tr");

          // à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¹ƒà¸šà¹€à¸ªà¸£à¹‡à¸ˆ - à¹à¸à¹‰à¹„à¸‚à¹ƒà¸«à¹‰à¹ƒà¸Šà¹‰ invoice_no à¹à¸—à¸™ _id
          const tdNo = document.createElement("td");
          tdNo.className = "px-4 py-3 font-medium";
          tdNo.textContent = rec.invoice_no || "-";
          tr.appendChild(tdNo);

          // à¸§à¸±à¸™à¸—à¸µà¹ˆ/à¹€à¸§à¸¥à¸²
          const tdDt = document.createElement("td");
          tdDt.className = "px-4 py-3";
          tdDt.textContent = formatDateTime(rec.performed_at || rec.sale_date);
          tr.appendChild(tdDt);

          // à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸² (à¸•à¸£à¸§à¸ˆà¸—à¸±à¹‰à¸‡ individual à¹à¸¥à¸° corporate)
          let customerName = "N/A";
          if (rec.customerType === "individual" && rec.customerInfo) {
            const { prefix, firstName, lastName } = rec.customerInfo;
            const full = `${prefix || ""} ${firstName || ""} ${lastName || ""}`.trim();
            customerName = full || "N/A";
          } else if (rec.customerType === "corporate" && rec.corporateInfo) {
            customerName = rec.corporateInfo.companyName || "N/A";
          }
          const tdCust = document.createElement("td");
          tdCust.className = "px-4 py-3";
          tdCust.textContent = customerName;
          tr.appendChild(tdCust);

          // à¸£à¸§à¸¡à¹€à¸‡à¸´à¸™ (à¹ƒà¸Šà¹‰ total_amount à¹à¸¥à¸° format à¹€à¸›à¹‡à¸™à¹€à¸¥à¸‚à¸«à¸¥à¸±à¸à¸„à¸­à¸¡à¸¡à¹ˆà¸²)
          const tdAmt = document.createElement("td");
          tdAmt.className = "px-4 py-3 text-right";
          const amount = rec.total_amount;
          tdAmt.textContent = (amount != null)
            ? Number(amount).toLocaleString('th-TH', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " ฿"
            : "-";
          tr.appendChild(tdAmt);

          // à¸Šà¸·à¹ˆà¸­à¸žà¸™à¸±à¸à¸‡à¸²à¸™
          const tdStaff = document.createElement("td");
          tdStaff.className = "px-4 py-3";
          // à¸¥à¸­à¸‡à¸«à¸²à¸Šà¸·à¹ˆà¸­à¸žà¸™à¸±à¸à¸‡à¸²à¸™à¸ˆà¸²à¸à¸Ÿà¸´à¸¥à¸"à¹Œà¸•à¹ˆà¸²à¸‡à¹†
          let staffName = rec.staff_name || rec.employee_name || rec.user_name || rec.created_by_name || rec.performedBy || "N/A";
          
          // à¸–à¹‰à¸²à¸¢à¸±à¸‡à¹€à¸›à¹‡à¸™ "à¸žà¸™à¸±à¸à¸‡à¸²à¸™" à¸«à¸£à¸·à¸­ "N/A" à¸¥à¸­à¸‡à¸"à¸¹à¸ˆà¸²à¸ user object
          if (staffName === "พนักงาน" || staffName === "N/A") {
            if (rec.user && rec.user.name) {
              staffName = rec.user.name;
            } else if (rec.userInfo && rec.userInfo.name) {
              staffName = rec.userInfo.name;
            } else if (rec.performed_by_user && rec.performed_by_user.name) {
              staffName = rec.performed_by_user.name;
            }
          }
          
          tdStaff.textContent = staffName;
          tr.appendChild(tdStaff);

          // Actions
          const tdAct = document.createElement("td");
          tdAct.className = "px-4 py-3 text-center";
          
          const btnGroup = document.createElement("div");
          btnGroup.className = "flex justify-center gap-2";
          
          const btnP = document.createElement("button");
          btnP.className = "btn btn-sm btn-primary";
          btnP.innerHTML = '<i class="bi bi-printer mr-1"></i> พิมพ์';
          btnP.onclick = () => printPOS(rec._id);
          btnGroup.appendChild(btnP);
          
          const btnD = document.createElement("button");
          btnD.className = "btn btn-sm btn-secondary";
          btnD.innerHTML = '<i class="bi bi-download mr-1"></i> ดาวน์โหลด';
          btnD.onclick = () => downloadReceiptImage(rec._id);
          btnGroup.appendChild(btnD);
          
          tdAct.appendChild(btnGroup);
          tr.appendChild(tdAct);

          tbody.appendChild(tr);
        });
      }

      // Render pagination
      function renderPagination(data, page) {
        const total = data.length;
        document.getElementById("totalItems").textContent = total;
        const start = (page - 1) * pageSize + 1;
        const end = Math.min(start + pageSize - 1, total);
        document.getElementById("currentRange").textContent = total ? `${start}-${end}` : "0-0";

        const controls = document.getElementById("paginationControls");
        controls.querySelector("#prevPage").disabled = page <= 1;
        controls.querySelector("#nextPage").disabled = page >= Math.ceil(total / pageSize);
        controls.querySelector("#prevPage").onclick = () => {
          if (currentPage > 1) {
            currentPage--;
            renderHistoryTable(filteredData, currentPage);
            renderPagination(filteredData, currentPage);
          }
        };
        controls.querySelector("#nextPage").onclick = () => {
          const maxP = Math.ceil(total / pageSize);
          if (currentPage < maxP) {
            currentPage++;
            renderHistoryTable(filteredData, currentPage);
            renderPagination(filteredData, currentPage);
          }
        };
      }

      // Filter handler
      function onFilter() {
        const s = document.getElementById("startDate").value;
        const e = document.getElementById("endDate").value;
        const q = document.getElementById("customerSearch").value.trim().toLowerCase();
        filteredData = filterByDateRange(globalOutData, s, e);
        if (q) {
          filteredData = filteredData.filter(item => {
            // à¸„à¹‰à¸™à¸«à¸²à¸—à¸±à¹‰à¸‡ individual à¹à¸¥à¸° corporate
            if (item.customerType === "individual" && item.customerInfo) {
              const { prefix, firstName, lastName } = item.customerInfo;
              const fullName = `${prefix || ""} ${firstName || ""} ${lastName || ""}`.toLowerCase();
              return fullName.includes(q);
            } else if (item.customerType === "corporate" && item.corporateInfo) {
              const companyName = (item.corporateInfo.companyName || "").toLowerCase();
              return companyName.includes(q);
            }
            return false;
          });
        }
        currentPage = 1;
        renderHistoryTable(filteredData, currentPage);
        renderPagination(filteredData, currentPage);
      }

      // Print POS
      async function printPOS(id) {
        const loaderId = LoadingSystem.show({
          message: 'กำลังดึงข้อมูลใบเสร็จ...',
          showProgress: true
        });
        
        try {
          const token = localStorage.getItem('authToken');
          if (!token) {
            LoadingSystem.hide(loaderId);
            alert('กรุณาเข้าสู่ระบบใหม่อีกครั้ง');
            window.location.href = '/login';
            return;
          }
          
          LoadingSystem.updateMessage(loaderId, 'กำลังดึงข้อมูลใบเสร็จ...');
          LoadingSystem.updateProgress(loaderId, 30);
          
          const res = await fetch(`/api/pos/history-receipt-image?historyId=${id}`, {
            headers: { 
              'Authorization': 'Bearer ' + token,
              'Content-Type': 'application/json'
            }
          });
          
          if (res.status === 401) {
            LoadingSystem.hide(loaderId);
            alert('กรุณาเข้าสู่ระบบใหม่อีกครั้ง');
            localStorage.removeItem('authToken');
            window.location.href = '../login.html';
            return;
          }
          
          LoadingSystem.updateMessage(loaderId, 'กำลังประมวลผลข้อมูล...');
          LoadingSystem.updateProgress(loaderId, 60);
          
          const js = await res.json();
          if (!res.ok || !js.success) throw new Error(js.error || js.message || "Error");
          
          LoadingSystem.updateMessage(loaderId, 'กรองข้อมูลสาขา...');
          LoadingSystem.updateProgress(loaderId, 70);
          
          // à¹ƒà¸Šà¹‰ PrinterSystem à¹€à¸žà¸·à¹ˆà¸­à¸"à¸¶à¸‡ URL à¸›à¸£à¸´à¹‰à¸™à¹€à¸•à¸­à¸£à¹Œà¸•à¸²à¸¡à¸ªà¸²à¸‚à¸² (async)
          const printerServerURL = await PrinterSystem.getPrinterURL();
          console.log(`🖨️ ใช้เครื่องพิมพ์ที่: ${printerServerURL} สำหรับสาขา: ${PrinterSystem.getBranchName()}`);
          console.log(`📡 ส่งคำสั่งพิมพ์ผ่าน proxy endpoint: /api/printer/print`);
          
          LoadingSystem.updateMessage(loaderId, 'ส่งคำสั่งไปยังเครื่องพิมพ์...');
          LoadingSystem.updateProgress(loaderId, 80);
          
          // à¹ƒà¸Šà¹‰ proxy endpoint à¹ƒà¸™ server à¸‚à¸­à¸‡à¹€à¸£à¸²à¹€à¸­à¸‡à¹€à¸žà¸·à¹ˆà¸­à¸«à¸¥à¸µà¸à¹€à¸¥à¸µà¹ˆà¸¢à¸‡à¸›à¸±à¸à¸«à¸² HSTS
          // ใช้ XMLHttpRequest เพื่อบังคับ localhost และหลีกเลี่ยง redirect
          const currentHost = window.location.hostname;
          const currentPort = window.location.port || '3000';
          
          // ใช้ absolute URL สำหรับ localhost เพื่อป้องกันการ redirect
          let proxyEndpoint;
          if (currentHost === 'localhost' || currentHost === '127.0.0.1') {
            proxyEndpoint = `http://localhost:${currentPort}/api/printer/print`;
          } else {
            proxyEndpoint = `/api/printer/print`;
          }
          
          console.log(`ðŸ"— Current host: ${currentHost}:${currentPort}`);
          console.log(`ðŸ"— Using proxy endpoint: ${proxyEndpoint}`);
          
          // à¹ƒà¸Šà¹‰ XMLHttpRequest à¹à¸—à¸™ fetch à¹€à¸žà¸·à¹ˆà¸­à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸à¸²à¸£ redirect
          const apiKey = PrinterSystem.getAPIKey(); // ดึง API Key สำหรับ printer server
          
          const response = await new Promise((resolve, reject) => {
            const xhr = new XMLHttpRequest();
            xhr.open('POST', proxyEndpoint, true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('X-API-Key', apiKey); // เพิ่ม API Key header
            xhr.timeout = 15000; // 15 seconds timeout
            
            xhr.onload = function() {
              resolve({
                ok: xhr.status >= 200 && xhr.status < 300,
                status: xhr.status,
                json: async () => JSON.parse(xhr.responseText)
              });
            };
            
            xhr.onerror = function() {
              reject(new Error(`Network error: ${xhr.status} ${xhr.statusText}`));
            };
            
            xhr.ontimeout = function() {
              reject(new Error('Request timeout (15 seconds)'));
            };
            
            xhr.send(JSON.stringify({ 
              image: js.data.receiptImage,
              printerURL: printerServerURL,
              apiKey: apiKey // ส่ง API Key ใน body ด้วย
            }));
          });
          
          let pr;
          try {
            pr = await response.json();
          } catch (jsonError) {
            console.error('Failed to parse JSON response:', jsonError);
            throw new Error(`Server returned invalid JSON (HTTP ${response.status})`);
          }
          
          console.log('ðŸ"¥ Server response:', pr);
          
          if (!response.ok || !pr.success) {
            const errorMsg = pr.error || pr.message || `HTTP ${response.status}: Print failed`;
            console.error('âŒ Print failed:', errorMsg);
            
            // แสดงข้อความแนะนำการแก้ไขตามประเภทของ error
            let userFriendlyMsg = errorMsg;
            if (errorMsg.includes('Cannot connect to printer server') || errorMsg.includes('ECONNREFUSED')) {
              userFriendlyMsg = '🖨️ ไม่สามารถเชื่อมต่อเครื่องพิมพ์ได้\n\nกรุณาตรวจสอบ:\n• เครื่องพิมพ์เปิดใช้งานหรือไม่\n• การเชื่อมต่อเครือข่าย\n• IP Address และ Port ของเครื่องพิมพ์';
            } else if (errorMsg.includes('Cannot resolve hostname') || errorMsg.includes('ENOTFOUND')) {
              userFriendlyMsg = '🌐 ไม่พบที่อยู่เครื่องพิมพ์\n\nกรุณาตรวจสอบ:\n• IP Address ของเครื่องพิมพ์\n• การตั้งค่าเครือข่าย\n• การเชื่อมต่ออินเทอร์เน็ต';
            } else if (errorMsg.includes('timeout')) {
              userFriendlyMsg = '⏰ เครื่องพิมพ์ตอบสนองช้าเกินไป\n\nกรุณา:\n• ลองใหม่อีกครั้ง\n• ตรวจสอบการเชื่อมต่อเครือข่าย\n• รีสตาร์ทเครื่องพิมพ์';
            }
            
            throw new Error(userFriendlyMsg);
          }
          
          // Success
          LoadingSystem.hide(loaderId);
          const successId = LoadingSystem.show({
            message: 'พิมพ์ใบเสร็จสำเร็จ! 🖨️',
            type: 'success',
            timeout: 3000
          });
          
          // à¹à¸ªà¸" Toast notification
          if (window.showToast) {
            window.showToast('พิมพ์ใบเสร็จสำเร็จ! 🖨️', 'success');
          }
          
        } catch (err) {
          console.error(err);
          LoadingSystem.hide(loaderId);
          const errorId = LoadingSystem.show({
            message: 'เกิดข้อผิดพลาดระหว่างพิมพ์ใบเสร็จ! ❌',
            type: 'error',
            timeout: 4000
          });
          
          // à¹à¸ªà¸" Toast notification
          if (window.showToast) {
            window.showToast('เกิดข้อผิดพลาดระหว่างพิมพ์ใบเสร็จ! ❌', 'error');
          }
        }
      }

      // Download image
      function base64ToBlob(b64, mime) {
        const bin = atob(b64);
        const arr = new Uint8Array(bin.length);
        for (let i=0; i<bin.length; i++) arr[i] = bin.charCodeAt(i);
        return new Blob([arr], {type: mime});
      }
      
      async function downloadReceiptImage(id) {
        const loaderId = LoadingSystem.show({
          message: 'กำลังเตรียมดาวน์โหลดไฟล์...',
          showProgress: true
        });
        
        try {
          const token = localStorage.getItem('authToken');
          if (!token) {
            LoadingSystem.hide(loaderId);
            alert('กรุณาเข้าสู่ระบบใหม่อีกครั้ง');
            window.location.href = '../login.html';
            return;
          }
          
          LoadingSystem.updateMessage(loaderId, 'กำลังดึงข้อมูลใบเสร็จ...');
          LoadingSystem.updateProgress(loaderId, 25);
          
          const res = await fetch(`/api/pos/history-receipt-image?historyId=${id}`, {
            headers: { 
              'Authorization': 'Bearer ' + token,
              'Content-Type': 'application/json'
            }
          });
          
          if (res.status === 401) {
            LoadingSystem.hide(loaderId);
            alert('กรุณาเข้าสู่ระบบใหม่อีกครั้ง');
            localStorage.removeItem('authToken');
            window.location.href = '../login.html';
            return;
          }
          
          LoadingSystem.updateMessage(loaderId, 'กำลังประมวลผลข้อมูลภาพ...');
          LoadingSystem.updateProgress(loaderId, 50);
          
          const js = await res.json();
          if (!res.ok || !js.success) throw new Error(js.error || js.message || "Error");

          LoadingSystem.updateMessage(loaderId, 'แปลงข้อมูลภาพ...');
          LoadingSystem.updateProgress(loaderId, 75);

          // 1) ดึง base64 string มาจาก response
          let b64 = js.data.receiptImage;
          if (typeof b64 === 'object' && b64.base64) {
            b64 = b64.base64;
          }
          if (typeof b64 !== 'string') {
            throw new Error('Invalid image data');
          }

          // 2) ถ้ามี data URL prefix ให้ตัดออก
          const commaIdx = b64.indexOf(',');
          if (commaIdx !== -1 && b64.startsWith('data:')) {
            b64 = b64.slice(commaIdx + 1);
          }
          // 3) ลบ whitespace ทั้งหมด
          b64 = b64.replace(/\s/g, '');

          LoadingSystem.updateMessage(loaderId, 'กำลังดาวน์โหลดไฟล์...');
          LoadingSystem.updateProgress(loaderId, 90);

          // 4) แปลง base64 -> binary
          const binStr = atob(b64);
          const len    = binStr.length;
          const buf    = new Uint8Array(len);
          for (let i = 0; i < len; i++) {
            buf[i] = binStr.charCodeAt(i);
          }

          // 5) สร้าง Blob URL แล้วสั่งดาวน์โหลด
          const blobUrl = URL.createObjectURL(new Blob([buf], { type: "image/png" }));
          const link    = document.createElement("a");
          link.href     = blobUrl;
          link.download = `receipt_${id}.png`;
          document.body.appendChild(link);
          link.click();
          link.remove();
          URL.revokeObjectURL(blobUrl);

          LoadingSystem.updateProgress(loaderId, 100);
          
          // Success
          LoadingSystem.hide(loaderId);
          const successId = LoadingSystem.show({
            message: 'ดาวน์โหลดสำเร็จ! 📥',
            type: 'success',
            timeout: 3000
          });
          
          // à¹à¸ªà¸" Toast notification
          if (window.showToast) {
            window.showToast('ดาวน์โหลดใบเสร็จสำเร็จ! 📥', 'success');
          }

        } catch (err) {
          console.error(err);
          LoadingSystem.hide(loaderId);
          const errorId = LoadingSystem.show({
            message: 'เกิดข้อผิดพลาดระหว่างดาวน์โหลดไฟล์! ❌',
            type: 'error',
            timeout: 4000
          });
          
          // à¹à¸ªà¸" Toast notification
          if (window.showToast) {
            window.showToast('เกิดข้อผิดพลาดระหว่างดาวน์โหลดไฟล์! ❌', 'error');
          }
        }
      }

      // Load branch info
      async function loadBranchInfo() {
        const branchInfoElement = document.getElementById("branchInfo");
        
        try {
          console.log('🏢 Loading branch info for:', BRANCH_CODE);
          
          const token = localStorage.getItem("authToken");
          if (!token) {
            console.log('❌ No auth token found');
            branchInfoElement.textContent = "สาขา: (ไม่มี token)";
            return;
          }
          
          console.log('🔗 Fetching branch data from /api/branch...');
          const res = await fetch('/api/branch', { 
            headers: { 
              'Authorization': 'Bearer ' + token,
              'Content-Type': 'application/json'
            }
          });
          
          console.log('📡 Branch API response status:', res.status);
          
          if (!res.ok) {
            console.log('❌ Branch API error:', res.status, res.statusText);
            branchInfoElement.textContent = `สาขา: (API Error ${res.status})`;
            return;
          }
          
          const js = await res.json();
          console.log('📊 Branch API response:', js);
          
          if (js.success && js.data && Array.isArray(js.data)) {
            console.log(`📋 Found ${js.data.length} branches`);
            console.log('🔍 Available branches:', js.data.map(b => ({
              code: b.branch_code,
              name: b.name
            })));
            
            const branch = js.data.find(x => x.branch_code === BRANCH_CODE);
            console.log('🎯 Found matching branch:', branch);
            
            if (branch) {
              const branchText = `${branch.name} — ${branch.address || 'ไม่ระบุที่อยู่'}`;
              branchInfoElement.textContent = branchText;
              console.log('✅ Branch info loaded:', branchText);
            } else {
              console.log(`⚠️ Branch code ${BRANCH_CODE} not found in available branches`);
              branchInfoElement.textContent = `สาขา: รหัส ${BRANCH_CODE} (ไม่พบในระบบ)`;
            }
          } else {
            console.log('❌ Invalid branch API response structure:', js);
            branchInfoElement.textContent = "สาขา: (ข้อมูลไม่ถูกต้อง)";
          }
        } catch (error) {
          console.error('❌ Branch loading error:', error);
          branchInfoElement.textContent = `สาขา: (เกิดข้อผิดพลาด: ${error.message})`;
        }
      }

      // Setup Socket.IO for real-time notifications
      function setupSocketIO() {
        if (typeof io === 'undefined') {
          console.warn('Socket.IO ไม่พร้อมใช้งาน - ข้ามการตั้งค่า');
          return;
        }

        try {
          const socket = io();
          
          socket.on('connect', () => {
            console.log('🔗 Socket.IO connected for HistoryReceipt');
            
            // ส่งข้อมูลสาขาไปยังเซิร์ฟเวอร์เพื่อ join room
            socket.emit('join_branch', {
              branchCode: BRANCH_CODE,
              page: 'HistoryReceipt',
              timestamp: new Date().toISOString()
            });

            // ส่ง join notification room สำหรับระบบแจ้งเตือน
            socket.emit('join_notification_room', {
              branchCode: BRANCH_CODE,
              timestamp: new Date().toISOString()
            });
          });

          socket.on('disconnect', (reason) => {
            console.log('❌ Socket.IO disconnected:', reason);
          });

          // à¸Ÿà¸±à¸‡ notification events
          socket.on('notification', (data) => {
            if (window.showToast) {
              window.showToast(data.message, data.type || 'info');
            }
            if (window.showNotificationDot) {
              window.showNotificationDot();
            }
          });

          socket.on('broadcast_notification', (data) => {
            if (window.showToast) {
              window.showToast(`ðŸ"¢ ${data.message}`, data.type || 'info', 6000);
            }
            if (window.showNotificationDot) {
              window.showNotificationDot();
            }
          });

          socket.on('system_notification', (data) => {
            if (window.showToast) {
              window.showToast(`ðŸ"§ ${data.message}`, data.type || 'warning', 8000);
            }
            if (window.showNotificationDot) {
              window.showNotificationDot();
            }
          });

          socket.on('forceLogout', (data) => {
            if (window.showToast) {
              window.showToast(data.reason || 'เกิดข้อผิดพลาดในการเข้าสู่ระบบ', 'error', 5000);
            }
            setTimeout(() => {
              localStorage.clear();
              window.location.href = '/login.html';
            }, 3000);
          });

          // à¸Ÿà¸±à¸‡ receipt-related notifications
          socket.on('receipt_printed', (data) => {
            if (window.showToast) {
              window.showToast('เสร็จรับเงินแล้ว!', 'success');
            }
          });

          socket.on('receipt_updated', (data) => {
            if (window.showToast) {
              window.showToast('เสร็จรับเงินอีกครั้ง', 'info');
            }
            // à¸£à¸µà¹‚à¸«à¸¥à¸"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¹ƒà¸«à¸¡à¹ˆ
            refreshHistoryData();
          });

        } catch (error) {
          console.error('âŒ Socket.IO setup error:', error);
        }
      }

      // Function to refresh history data
      async function refreshHistoryData() {
        try {
          const loaderId = LoadingSystem.show({
            message: 'กำลังโหลดข้อมูลใบเสร็จ...',
            showProgress: true,
            timeout: 5000
          });
          
          globalOutData = await fetchOutHistoryData();
          filteredData = globalOutData;
          renderHistoryTable(filteredData, currentPage);
          renderPagination(filteredData, currentPage);
          
          LoadingSystem.hide(loaderId);
        } catch (error) {
          console.error('Error refreshing data:', error);
        }
      }

      // à¸£à¸°à¸šà¸šà¸žà¸´à¸¡à¸žà¹Œà¹ƒà¸šà¹€à¸ªà¸£à¹‡à¸ˆ
      const PrinterSystem = {
        config: {
          branches: {
            '00000': {
              url: 'http://100.106.108.57:4001', // âœ… à¸ªà¸³à¸™à¸±à¸à¸‡à¸²à¸™à¹ƒà¸«à¸à¹ˆ (à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥)
              name: 'à¸ªà¸³à¸™à¸±à¸à¸‡à¸²à¸™à¹ƒà¸«à¸à¹ˆ',
              apiKey: 'printer-server-key-2024'
            },
            '00001': {
              url: 'http://192.168.1.121:4001', // âœ… à¸ªà¸²à¸‚à¸²à¸«à¸²à¸"à¹ƒà¸«à¸à¹ˆ (à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥)
              name: 'à¸ªà¸²à¸‚à¸²à¸«à¸²à¸"à¹ƒà¸«à¸à¹ˆ',
              apiKey: 'printer-server-key-2024'
            },
            '00002': {
              url: 'http://192.168.1.122:4001', // âœ… à¸ªà¸²à¸‚à¸²à¸ªà¸•à¸¹à¸¥ (à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥)
              name: 'à¸ªà¸²à¸‚à¸²à¸ªà¸•à¸¹à¸¥',
              apiKey: 'printer-server-key-2024'
            },
            '00003': {
              url: 'http://192.168.1.123:4001', // âœ… à¸ªà¸²à¸‚à¸²à¸žà¸±à¸—à¸¥à¸¸à¸‡ (à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥)
              name: 'à¸ªà¸²à¸‚à¸²à¸žà¸±à¸—à¸¥à¸¸à¸‡',
              apiKey: 'printer-server-key-2024'
            },
            '00004': {
              url: 'http://192.168.1.124:4001', // âœ… à¸ªà¸²à¸‚à¸²à¸™à¸„à¸£à¸¨à¸£à¸µà¸˜à¸£à¸£à¸¡à¸£à¸²à¸Š (à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥)
              name: 'à¸ªà¸²à¸‚à¸²à¸™à¸„à¸£à¸¨à¸£à¸µà¸˜à¸£à¸£à¸¡à¸£à¸²à¸Š',
              apiKey: 'printer-server-key-2024'
            }
          },
          currentBranch: '00000',
          branchDataCache: null,
          lastBranchDataFetch: null
        },

        // à¸"à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ branch à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
        fetchBranchData: async function() {
          try {
            const cacheValid = this.config.branchDataCache && 
                             this.config.lastBranchDataFetch && 
                             (Date.now() - this.config.lastBranchDataFetch) < 300000; // 5 minutes cache
            
            if (cacheValid) {
              console.log('🔋 ใช้ branch data จาก cache');
              return this.config.branchDataCache;
            }
            
            console.log('🌐 ดึงข้อมูล branch จากฐานข้อมูล...');
            const token = localStorage.getItem('authToken');
            const response = await fetch('/api/branch', {
              headers: { 
                'Authorization': 'Bearer ' + token,
                'Content-Type': 'application/json'
              }
            });
            
            if (!response.ok) {
              throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            const result = await response.json();
            if (result.success && result.data) {
              this.config.branchDataCache = result.data;
              this.config.lastBranchDataFetch = Date.now();
              console.log(`✅ ดึงข้อมูล ${result.data.length} สาขาสำเร็จ`);
              return result.data;
            } else {
              throw new Error('Invalid response format');
            }
          } catch (error) {
            console.error('❌ ไม่สามารถดึงข้อมูล branch:', error);
            return null;
          }
        },

        // ดึง URL ปรินเตอร์ตามสาขา (ดึงจากฐานข้อมูลก่อน)
        getPrinterURL: async function(branchCode = null) {
          const branch = branchCode || BRANCH_CODE || this.config.currentBranch;
          console.log(`🔍 ค้นหา printer URL สำหรับสาขา: ${branch}`);
          
          // 1. ลองดึงจากฐานข้อมูลก่อน
          try {
            const branchData = await this.fetchBranchData();
          if (branchData) {
              const branchInfo = branchData.find(b => b.branch_code === branch);
            if (branchInfo && branchInfo.printerServerUrl) {
              console.log(`✅ พบ printer URL จากฐานข้อมูล: ${branchInfo.printerServerUrl}`);
                return this.ensureHttp(branchInfo.printerServerUrl);
            } else {
                console.log(`⚠️ สาขา ${branch} ไม่มี printerServerUrl ในฐานข้อมูล`);
            }
            }
          } catch (error) {
            console.error('❌ ข้อผิดพลาดในการดึงข้อมูลฐานข้อมูล:', error);
          }
          
          // 2. ใช้ config สำรอง
          const branchConfig = this.config.branches[branch];
          if (branchConfig) {
            console.log(`✅ ใช้ printer URL จาก config: ${branchConfig.url}`);
            return this.ensureHttp(branchConfig.url);
          }
          
          // 3. ใช้ localStorage หรือ default
          const fallbackUrl = localStorage.getItem('printerServerURL') || 'http://100.106.108.57:4001';
          console.warn(`⚠️ ใช้ fallback printer URL: ${fallbackUrl}`);
          return this.ensureHttp(fallbackUrl);
        },

        // บังคับให้ใช้ HTTP (ป้องกันการ redirect เป็น HTTPS)
        ensureHttp: function(url) {
          if (url.startsWith('https://')) {
            const httpUrl = url.replace('https://', 'http://');
            console.log(`🔧 แปลง HTTPS เป็น HTTP: ${httpUrl}`);
            return httpUrl;
          }
          return url;
        },

        // ดึง API Key ตามสาขา
        getAPIKey: function(branchCode = null) {
          const branch = branchCode || BRANCH_CODE.toLowerCase() || this.config.currentBranch;
          const branchConfig = this.config.branches[branch];
          
          if (branchConfig && branchConfig.apiKey) {
            return branchConfig.apiKey;
          }
          
          // ใช้ default API key
          return 'printer-server-key-2024';
        },

        // ดึงชื่อสาขา
        getBranchName: function(branchCode = null) {
          const branch = branchCode || BRANCH_CODE.toLowerCase() || this.config.currentBranch;
          const branchConfig = this.config.branches[branch];
          return branchConfig ? branchConfig.name : `สาขา ${branch.toUpperCase()}`;
        },

        // แสดงการตั้งค่าปัจจุบัน (async)
        showCurrentConfig: async function() {
          const currentBranch = BRANCH_CODE || this.config.currentBranch;
          const printerURL = await this.getPrinterURL();
          const branchName = this.getBranchName();
          const apiKey = this.getAPIKey();
          
          return {
            branch: currentBranch,
            branchName: branchName,
            printerURL: printerURL,
            apiKey: apiKey,
            hasConfig: !!this.config.branches[currentBranch],
            tailscaleEnabled: true,
            printerServerIntegrated: true,
            fromDatabase: this.config.branchDataCache ? true : false
          };
        }
      };

      // Single DOMContentLoaded
      document.addEventListener("DOMContentLoaded", async () => {
        let pageLoaderId = null;
        try {
          pageLoaderId = LoadingSystem.show({
            message: 'กำลังโหลดข้อมูล...',
            showProgress: true
          });
          
          LoadingSystem.updateMessage(pageLoaderId, 'กำลังโหลดข้อมูลใบเสร็จ...');
          LoadingSystem.updateProgress(pageLoaderId, 10);
          
          // เชื่อมต่อ Socket.IO
          setupSocketIO();
          
          LoadingSystem.updateMessage(pageLoaderId, 'กำลังโหลดข้อมูลสาขา...');
          LoadingSystem.updateProgress(pageLoaderId, 20);
          
          // โหลดข้อมูลสาขาพร้อม timeout
          try {
            await Promise.race([
              loadBranchInfo(),
              new Promise((_, reject) => 
                setTimeout(() => reject(new Error('Branch loading timeout (10s)')), 10000)
              )
            ]);
          } catch (branchError) {
            console.error('Branch loading failed:', branchError);
            const branchInfoElement = document.getElementById("branchInfo");
            if (branchInfoElement) {
              branchInfoElement.textContent = `สาขา: ${BRANCH_CODE} (โหลดไม่สำเร็จ)`;
            }
            // ไม่ให้ error ตรงนี้หยุดการทำงานของระบบ
          }

          LoadingSystem.updateMessage(pageLoaderId, 'กำลังดึงข้อมูลใบเสร็จ...');
          LoadingSystem.updateProgress(pageLoaderId, 40);
          
          // 1) ดึงข้อมูลจาก API
          globalOutData = await fetchOutHistoryData();
          filteredData  = globalOutData;
          
          // Debug: แสดงข้อมูลที่ได้
          console.log('🎯 Final loaded history data:', globalOutData);
          console.log('🎯 Data count:', globalOutData.length);
          
          if (globalOutData.length > 0) {
            console.log('📋 Sample record fields:', Object.keys(globalOutData[0]));
            console.log('📋 Sample record:', globalOutData[0]);
            
            // ตรวจสอบ field ที่สำคัญ
            const sample = globalOutData[0];
            console.log('🔍 Receipt number fields:', {
              invoice_no: sample.invoice_no,
              receipt_no: sample.receipt_no,
              _id: sample._id,
              id: sample.id
            });
            console.log('🔍 Date fields:', {
              performed_at: sample.performed_at,
              sale_date: sample.sale_date,
              created_at: sample.created_at,
              date: sample.date
            });
            console.log('🔍 Amount fields:', {
              total_amount: sample.total_amount,
              amount: sample.amount,
              total: sample.total,
              sum: sample.sum
            });
          } else {
            console.log('⚠️ No data loaded! Check:');
            console.log('  1. Branch code:', BRANCH_CODE);
            console.log('  2. API endpoint response');
            console.log('  3. Database has receipt data for this branch');
            console.log('  4. Authentication token');
          }
          
          LoadingSystem.updateMessage(pageLoaderId, 'กำลังดึงข้อมูลใบเสร็จ...');
          LoadingSystem.updateProgress(pageLoaderId, 80);
          
          // 2) แสดงข้อมูลกับ pagination
          renderHistoryTable(filteredData, currentPage);
          renderPagination(filteredData, currentPage);
          
          // แสดงข้อความเมื่อไม่มีข้อมูล
          if (globalOutData.length === 0) {
            setTimeout(() => {
              const tbody = document.getElementById("historyTableBody");
              tbody.innerHTML = `
                <tr>
                  <td colspan="6" class="text-center text-gray-500 py-8">
                    <i class="bi bi-exclamation-triangle text-4xl text-yellow-500 mb-3"></i>
                    <h3 class="text-lg font-semibold mb-2">ไม่พบข้อมูลประวัติใบเสร็จ</h3>
                    <p class="mb-2">สาขา: ${BRANCH_CODE}</p>
                    <div class="text-sm text-gray-400">
                      <p>• ตรวจสอบว่ามีการขายสินค้าในสาขานี้หรือไม่</p>
                      <p>• ลองเปิด Developer Tools (F12) และดู Console เพื่อข้อมูลเพิ่มเติม</p>
                      <p>• ตรวจสอบการเชื่อมต่อเครือข่ายและสิทธิ์เข้าถึงข้อมูล</p>
                    </div>
                  </td>
                </tr>`;
            }, 500);
          }
          
          LoadingSystem.updateMessage(pageLoaderId, 'กำลังดึงข้อมูลใบเสร็จ...');
          LoadingSystem.updateProgress(pageLoaderId, 95);
          
          // 3) กำหนด event listener สำหรับการค้นหา
          document.getElementById("btnFilter").addEventListener("click", onFilter);
          document.getElementById("customerSearch").addEventListener("keyup", e => {
            if (e.key === 'Enter') onFilter();
          });
          
          LoadingSystem.completeProgress(pageLoaderId);
          
        } catch (error) {
          console.error('Page loading error:', error);
          if (pageLoaderId) {
            LoadingSystem.hide(pageLoaderId);
            const errorLoaderId = LoadingSystem.show({
              message: 'เกิดข้อผิดพลาดในการโหลดข้อมูล',
              type: 'error',
              timeout: 5000
            });
          }
        }
      });

      // ทดสอบการแจ้งเตือนจากระบบ
      window.testHistoryNotifications = function() {
        console.log('ðŸ§ª Testing notification system in HistoryReceipt...');
        
        if (window.testNotifications) {
          window.testNotifications();
        } else if (window.showToast) {
          window.showToast('เสร็จรับเงินแล้ว', 'info');
          setTimeout(() => window.showToast('เสร็จรับเงินแล้ว', 'success'), 1000);
          setTimeout(() => window.showToast('เสร็จรับเงินแล้ว', 'success'), 2000);
          setTimeout(() => window.showToast('เสร็จรับเงินแล้ว', 'error'), 3000);
        }
        
        console.log('âœ… Test notifications sent! à¸"à¸¹à¸—à¸µà¹ˆà¸¡à¸¸à¸¡à¸‚à¸§à¸²à¸šà¸™à¹à¸¥à¸°à¸„à¸¥à¸´à¸à¹„à¸­à¸„à¸­à¸™ ðŸ"")');
      };
      
              console.log('📖 HistoryReceipt - Available functions:');
        console.log('  • testHistoryNotifications() - ทดสอบระบบแจ้งเตือน');
        console.log('  • debugHistoryData() - แสดงข้อมูล debug');
        console.log('  • refreshHistoryData() - โหลดข้อมูลใหม่');
        console.log('🔔 Notification system integrated successfully in HistoryReceipt.html');
        
        // เพิ่ม debug function
        window.debugHistoryData = function() {
          console.log('=== DEBUG HISTORY DATA ===');
          console.log('Branch Code:', BRANCH_CODE);
          console.log('Raw Data Count:', globalOutData?.length || 0);
          console.log('Filtered Data Count:', filteredData?.length || 0);
          console.log('Raw Data:', globalOutData);
          console.log('Filtered Data:', filteredData);
          
          if (globalOutData && globalOutData.length > 0) {
            console.log('Sample Record:', globalOutData[0]);
            console.log('Available Fields:', Object.keys(globalOutData[0]));
          }
          
          // ตรวจสอบ API endpoints
          console.log('Available endpoints to test manually:');
          console.log(`  /api/receipts?branch_code=${BRANCH_CODE}`);
          console.log(`  /api/pos-receipts?branch_code=${BRANCH_CODE}`);
          console.log(`  /api/sales-history?branch_code=${BRANCH_CODE}`);
          console.log(`  /api/branch-stock-history`);
          
          return {
            branchCode: BRANCH_CODE,
            rawCount: globalOutData?.length || 0,
            filteredCount: filteredData?.length || 0,
            sampleData: globalOutData?.[0] || null
          };
        };
        
        // เพิ่ม refresh function
        window.refreshHistoryData = async function() {
          try {
            console.log('🔄 Refreshing history data...');
            
            // โหลดข้อมูลสาขาใหม่
            await loadBranchInfo();
            
            // โหลดข้อมูลใบเสร็จใหม่
            globalOutData = await fetchOutHistoryData();
            filteredData = globalOutData;
            
            // แสดงผลใหม่
            renderHistoryTable(filteredData, 1);
            renderPagination(filteredData, 1);
            
            console.log('✅ History data refreshed successfully!');
            console.log('📊 New data count:', globalOutData.length);
            
          } catch (error) {
            console.error('❌ Refresh failed:', error);
          }
        };
        
        console.log('✅ Debug functions ready! Available commands:');
        console.log('  • debugHistoryData() - ดูข้อมูลปัจจุบัน');
        console.log('  • refreshHistoryData() - โหลดข้อมูลใหม่');
        console.log('  • testHistoryNotifications() - ทดสอบการแจ้งเตือน');
        
        // Database Integration Info
        console.log('ðŸ—„ï¸ Database Printer Integration Status:');
        console.log('  â€¢ Default Branch: 00000 (à¸ªà¸³à¸™à¸±à¸à¸‡à¸²à¸™à¹ƒà¸«à¸à¹ˆ)');
        console.log('  â€¢ Fallback URL: http://100.106.108.57:4001');
        console.log('  â€¢ API Key: printer-server-key-2024');
        console.log('  â€¢ Data Source: Database (with config fallback)');
        console.log('  â€¢ Available functions:');
        console.log('    - testDirectPrinterConnection() - ทดสอบการเชื่อมต่อเครื่องพิมพ์ (async)');
        console.log('    - showPrinterSettings() - แสดงการตั้งค่าปัจจุบัน (async)');
        console.log('    - PrinterSystem.showCurrentConfig() - ดึงข้อมูลการตั้งค่าปัจจุบัน (async)');
        console.log('    - PrinterSystem.fetchBranchData() - ดึงข้อมูลสาขา (async)');
        console.log('âœ… Database-Driven Printer Server Integration Ready!');

        // การตั้งค่าการเชื่อมต่อเครื่องพิมพ์
        window.setupPrinterServer = async function() {
          const loaderId = LoadingSystem.show({
            message: 'กำลังเตรียมตั้งค่าการเชื่อมต่อเครื่องพิมพ์...',
            timeout: 5000
          });
          
          try {
            const config = await PrinterSystem.showCurrentConfig();
            
            LoadingSystem.hide(loaderId);
            
            let message = `กรุณาเข้าสู่ระบบใหม่อีกครั้ง\n\n`;
            message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
            message += `URL: ${config.printerURL}\n`;
            message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
            message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
            message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
            message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
            
            if (config.fromDatabase) {
              message += `กรุณาตรวจสอบ URL ที่ตั้งไว้ในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ? 'âœ… เปิดใช้งาน' : 'âŒ ปิดใช้งาน'}\n`;
              message += `จากฐานข้อมูล: ${config.fromDatabase ? 'âœ… ใช้งาน' : 'âŒ ไม่ใช้งาน'}\n`;
              message += `การตั้งค่าปัจจุบัน: ${config.hasConfig ? 'âœ… ใช้งาน' : 'âš ï¸ ไม่ใช้งาน'}\n\n`;
              message += `กรุณาตรวจสอบการตั้งค่าปัจจุบันในระบบ\n`;
              message += `สาขา: ${config.branchName} (${config.branch.toUpperCase()})\n`;
              message += `URL: ${config.printerURL}\n`;
              message += `API Key: ${config.apiKey.substring(0, 10)}...\n`;
              message += `Tailscale: ${config.tailscaleEnabled ?
  <!-- Loading Animation Functions -->
  <script>
    let historyBackupLottieAnimation = null;

    function showHistoryBackupLoading() {
      try {
        const overlay = document.getElementById('historyBackupLoadingOverlay');
        const container = document.getElementById('historyBackupLottieContainer');

        if (!overlay || !container) {
          console.warn('[HistoryBackup] Loading elements not found');
          return;
        }

        overlay.classList.remove('animate__fadeOut');
        overlay.style.display = 'flex';
        overlay.style.opacity = '1';
        overlay.style.visibility = 'visible';

        // Initialize Lottie animation if not already done
        if (!historyBackupLottieAnimation) {
          historyBackupLottieAnimation = lottie.loadAnimation({
            container: container,
            renderer: 'svg',
            loop: true,
            autoplay: true,
            path: 'https://lottie.host/4db68bbd-31f6-4cd8-b6a5-2cea9a7d3ec2/qBuDuHr0pB.json'
          });

          historyBackupLottieAnimation.addEventListener('error', () => {
            console.warn('[HistoryBackup] Lottie animation failed to load');
            container.innerHTML = '<div class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto"></div>';
          });
        }

        console.log('[HistoryBackup] Loading overlay shown');
      } catch (error) {
        console.error('[HistoryBackup] Error showing loading:', error);
      }
    }

    function hideHistoryBackupLoading() {
      try {
        const overlay = document.getElementById('historyBackupLoadingOverlay');

        if (!overlay) {
          console.warn('[HistoryBackup] Loading overlay not found');
          return;
        }

        overlay.classList.add('animate__fadeOut');

        setTimeout(() => {
          overlay.style.display = 'none';
          overlay.style.opacity = '0';
          overlay.style.visibility = 'hidden';
        }, 300);

        console.log('[HistoryBackup] Loading overlay hidden');
      } catch (error) {
        console.error('[HistoryBackup] Error hiding loading:', error);
      }
    }

    // Auto-hide loading when page is fully loaded
    document.addEventListener('DOMContentLoaded', function() {
      console.log('[HistoryBackup] DOM Content Loaded');

      // Hide loading after a short delay to ensure all resources are loaded
      setTimeout(() => {
        hideHistoryBackupLoading();
      }, 1000);
    });

    // Show loading when navigating away
    window.addEventListener('beforeunload', function() {
      showHistoryBackupLoading();
    });

    // Initial loading state
    document.addEventListener('readystatechange', function() {
      if (document.readyState === 'complete') {
        setTimeout(() => {
          hideHistoryBackupLoading();
        }, 500);
      }
    });
  </script>
  </body>
</html>
